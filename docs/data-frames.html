<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 4 Data Frames | STAT 240 Revamp</title>
<meta name="author" content="Bi Cheng Wu, with help from Bret Larget and Cameron Jones">
<meta name="description" content="Moving on from vectors, the next most important data structure in R is the data frame. Think of a data frame as similar to a matrix, but (ideally) each column is a vector of a single type...">
<meta name="generator" content="bookdown 0.40.1 with bs4_book()">
<meta property="og:title" content="Chapter 4 Data Frames | STAT 240 Revamp">
<meta property="og:type" content="book">
<meta property="og:url" content="https://bwu62.github.io/stat240-revamp/data-frames.html">
<meta property="og:description" content="Moving on from vectors, the next most important data structure in R is the data frame. Think of a data frame as similar to a matrix, but (ideally) each column is a vector of a single type...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 4 Data Frames | STAT 240 Revamp">
<meta name="twitter:description" content="Moving on from vectors, the next most important data structure in R is the data frame. Think of a data frame as similar to a matrix, but (ideally) each column is a vector of a single type...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Roboto_Mono-0.4.9/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.8.0/transition.js"></script><script src="libs/bs3compat-0.8.0/tabs.js"></script><script src="libs/bs3compat-0.8.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.4/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-E0YDB40HWY"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-E0YDB40HWY');
    </script><link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
<link rel="manifest" href="icons/site.webmanifest">
<link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<!-- https://www.bryanbraun.com/anchorjs/ --><script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script><script>
      // Add anchors on DOMContentLoaded
    document.addEventListener('DOMContentLoaded', function(event) {
      anchors.add('h1');
      anchors.add();
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">STAT 240 Revamp</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome!</a></li>
<li><a class="" href="setup.html"><span class="header-section-number">1</span> Setup</a></li>
<li class="book-part">R crash course</li>
<li><a class="" href="rstudio-intro.html"><span class="header-section-number">2</span> Intro to R/Rstudio</a></li>
<li><a class="" href="data-vectors.html"><span class="header-section-number">3</span> Data Vectors</a></li>
<li><a class="active" href="data-frames.html"><span class="header-section-number">4</span> Data Frames</a></li>
<li><a class="" href="data-exploration.html">Data Exploration</a></li>
<li><a class="" href="descriptive.html"><span class="header-section-number">5</span> Descriptive Statistics</a></li>
<li><a class="" href="data-visualization.html"><span class="header-section-number">6</span> Data Visualization</a></li>
<li><a class="" href="data-transformation.html">Data Transformation</a></li>
<li><a class="" href="intro-to-dplyr.html"><span class="header-section-number">7</span> Intro to dplyr</a></li>
<li><a class="" href="advanced-operations.html"><span class="header-section-number">8</span> Advanced Operations</a></li>
<li><a class="" href="data-modeling.html">Data Modeling</a></li>
<li><a class="" href="overview.html"><span class="header-section-number">9</span> Overview</a></li>
<li><a class="" href="intro-to-probability.html"><span class="header-section-number">10</span> Intro to Probability</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="datasets.html"><span class="header-section-number">A</span> Datasets</a></li>
<li><a class="" href="cheat-sheets.html"><span class="header-section-number">B</span> Cheat Sheets</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/bwu62/stat240-revamp">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="data-frames" class="section level1" number="4">
<h1>
<span class="header-section-number">4</span> Data Frames<a class="anchor" aria-label="anchor" href="#data-frames"><i class="fas fa-link"></i></a>
</h1>
<p>Moving on from vectors, the next most important data structure in R is the data frame. Think of a data frame as similar to a matrix, but (ideally) <strong>each column is a vector of a single type representing a variable or attribute, and each row is an observation in your sample</strong>.</p>
<p>It’s actually really helpful to think of a data frame as a collection of parallel vectors with the same length, each to a column with its own type. E.g. suppose you survey a sample of college students; maybe you’d have a sex column of character type, a GPA column of numeric type, a birthday column of date type, and a column for if they have declared a major with logical type.</p>
<div id="creating-dfs" class="section level2" number="4.1">
<h2>
<span class="header-section-number">4.1</span> Creating data frames<a class="anchor" aria-label="anchor" href="#creating-dfs"><i class="fas fa-link"></i></a>
</h2>
<p>There are 2 common ways of creating a new data frame manually: <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame()</a></code> from base R, or <code><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble()</a></code> from the <a href="https://tibble.tidyverse.org">tibble</a> package, another of the core Tidyverse packages. They are extremely similar, but we recommend <code><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble()</a></code> due to some nice extra features such as better printing, referencing other columns during creation, and stricter subsetting rules. Example:</p>
<div class="sourceCode" id="cb431"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># import the tibble and lubridate libraries</span></span>
<span><span class="co"># again, tibble is core tidyverse, so library(tidyverse) will also work</span></span>
<span><span class="co"># but lubridate is not core so needs to be imported manually</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org">lubridate</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb432"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># manually create an example data frame</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Alice"</span>, <span class="st">"Bob"</span>, <span class="st">"Charlie"</span><span class="op">)</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"M"</span><span class="op">)</span>,</span>
<span>  date_of_birth <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">mdy</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"1/4/03"</span>, <span class="st">"7/4/99"</span>, <span class="st">"10/31/06"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/now.html">today</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="va">birthday</span><span class="op">)</span><span class="op">/</span><span class="fl">365.24</span><span class="op">)</span>,</span>
<span>  declared_major <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  school <span class="op">=</span> <span class="st">"UW-Madison"</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># print df</span></span>
<span><span class="va">df</span></span></code></pre></div>
<pre><code># A tibble: 3 × 6
  name    sex   date_of_birth   age declared_major school    
  &lt;chr&gt;   &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt; &lt;lgl&gt;          &lt;chr&gt;     
1 Alice   F     2003-10-04       21 TRUE           UW-Madison
2 Bob     M     1999-07-04       25 TRUE           UW-Madison
3 Charlie M     2006-10-31       17 FALSE          UW-Madison</code></pre>
<p>Note the following:</p>
<ul>
<li>The syntax inside <code><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble()</a></code> is always <code>column_name = vector_of_data, next_column_name = next_vector_of_data, ...</code> where each vector must be the same length.</li>
<li>The vectors do not have to be pre-created; you can create them as you go along.</li>
<li>You can reference another column immediately after creating it inside the function, e.g. <code>date_of_birth</code> was created, and then immediately used on the next line to help create <code>age</code> (by the way <code>age</code> here is approximately computed as number of days since birth divided by 365.24, the approximate number of days in a year, then rounded down following convention).</li>
<li>Data frames can, and almost always do contain many columns each with a different type. However, as usual a single column—which is still a vector!—can only contain a SINGLE type of data inside it, e.g. you cannot have a column with both numbers and characters simultaneously.</li>
<li>Printing the df by either just writing it on a new line, or with the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> function (same thing) will show not only the first few rows, but also other info like
<ul>
<li>column (and row) names,</li>
<li>number of rows and columns (displayed as rows x cols),</li>
<li>and the type of each column (dbl, chr, lgl, date, or others beyond our scope)</li>
</ul>
</li>
<li>You can create a column of constants by recycling a single value
<ul>
<li>Note: by design, <code><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble()</a></code> will ONLY recycle length-1 vectors. This is to help avoid errors and improve syntax legibility.</li>
</ul>
</li>
</ul>
</div>
<div id="importing-data-frames" class="section level2" number="4.2">
<h2>
<span class="header-section-number">4.2</span> Importing data frames<a class="anchor" aria-label="anchor" href="#importing-data-frames"><i class="fas fa-link"></i></a>
</h2>
<p>Of course, in practice you don’t usually create data frames manually like this, but rather import them from data files. As always, there are base R ways for doing this, but we will continue to recommend Tidyverse syntax due to its better features and design.</p>
<p>There are a million different data formats, but we will only cover 3 of the most common basic ones: CSV, or comma separated value files; TSV, or tab separated files; and XLS(X), which are Excel (or similar spreadsheet software) data files. Notably, we do not cover databases (like SQL or its derivatives) or non-rectangular data formats (like JSON or XML), again due to limitations of time/space.</p>
<div id="aside-file-formats-extensions" class="section level3" number="4.2.1">
<h3>
<span class="header-section-number">4.2.1</span> Aside: file formats &amp; extensions<a class="anchor" aria-label="anchor" href="#aside-file-formats-extensions"><i class="fas fa-link"></i></a>
</h3>
<p>First, a small aside. File formats (or types) and file extensions are commonly conflated, but the distinction is important.</p>
<ul>
<li>File <strong>format</strong> refers to the internal structure of the contents. Common formats include simple text (which can be encoded using a variety of <a href="https://dsc.gmu.edu/tutorials-data/tutorial-character-encoding">different encodings</a> with ASCII and Unicode UTF-8 being the most common), other more complex documents like PDFs or DOCs, images and videos, compressed archives, binary executables, or other specialized (often proprietary) formats.</li>
<li>File <strong>extensions</strong>, in contrast are just characters added to the end of the name of a file for our convenience and to hint to computers (and users) what you might expect to find inside the contents of the file. It has no bearing on the actual file format contained inside.</li>
</ul>
<p>Many extensions may in fact be the same file format, e.g. .Rmd, .html, .csv, .txt, and many more are all examples of extensions that are actually just simple text files (under some encoding), which is why they can all be opened with any text editor. Conversely, some formats can be stored with a variety of different extensions, e.g. MPEG-4 is a versatile multimedia “container” format and may be stored not only as .mp4 but also .m4a, .m4b, .m4p, .m4r, or .m4v depending on context.</p>
<p>Again, the extension only exists to “hint” at the contents of a file. You can store a text file with a .mp4 extension if you want. Your computer will then suggest you open it with a video player which will fail, but you can force it to open in a text editor and it will work just fine. Remember <strong>file names and file contents are totally separate things</strong> and need not have any bearing on each other.</p>
<p>Some important takeaways from all this:</p>
<ul>
<li>Some data “formats” (like CSV, TSV, JSON, or XML) are really just simple text files (similar to the .txt files often created by text editor programs). In this class, when we say “CSV” we generally refer to the specific way the text is formatted (i.e. values separated by commas) inside the file, not just the extension.</li>
<li>Some data formats (like XLS(X) or databases) are not simple text files but specialized formats, and often need different treatment.</li>
<li>Just changing the extension of a file does NOT change the contents. E.g. changing a .csv extension to .zip does NOT create a valid zip file, no more than painting stripes on a horse turns it into a zebra.</li>
</ul>
<div class="note">
<p>Today, many systems by default hide file extensions, e.g. a file that’s actually named <code>data.csv</code> may appear to the user as just named <code>data</code>. This can cause problems, because if a user isn’t aware of this and tries to rename the file to <code>data.csv</code> it may actually become <code>data.csv.csv</code>. This is a common cause of knit-fail that we see.</p>
<p>We <strong>highly recommended you force your device to always show extensions</strong> which can help avoid these problems. Instructions <a href="https://www.howtogeek.com/205086/beginner-how-to-make-windows-show-file-extensions">for Windows</a> and <a href="https://support.apple.com/guide/mac-help/show-or-hide-filename-extensions-on-mac-mchlp2304/mac">for Macs</a>.</p>
</div>
</div>
<div id="importing-functions" class="section level3" number="4.2.2">
<h3>
<span class="header-section-number">4.2.2</span> Importing functions<a class="anchor" aria-label="anchor" href="#importing-functions"><i class="fas fa-link"></i></a>
</h3>
<p>For text-format data files, we once again turn to <a href="https://readr.tidyverse.org">readr</a> which has a suite of functions for importing them, of which we will only focus on a few:</p>
<ul>
<li>
<code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> is used to read in CSV files where columns of data are separated by commas,</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_tsv()</a></code> is used to read in files where columns of data are separated by tabs,</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim()</a></code> is the general form of these <code>read_...</code> functions and can be used to read in files with any other type of separator.</li>
</ul>
<p>One additional non-text format will be covered in this course: XLS(X) spreadsheet data, commonly generated by Excel or similar spreadsheet software. For these, we have a different function from Tidyverse’s non-core <a href="https://readxl.tidyverse.org">readxl</a> package:</p>
<ul>
<li>
<a href="https://rdrr.io/cran/readxl/man/read_excel.html"><code class="sourceCode r"><span class="kw">read_excel</span>()</code></a> can be used to read in both XLS and XLSX spreadsheet data</li>
</ul>
<div class="note">
<p>Note the underscores in the function names. E.g. <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> which is from readr is NOT the same as <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code> which is a base R function. They are similar, but readr’s <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> has some minor improvements in speed and consistency so is recommended by this class.</p>
<p>Also note that if you do not have readr (or tidyverse) loaded, attempting to <span class="k">TAB</span> autocomplete the <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> function will instead give you <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code> so again, remember to set your working directory and load necessary libraries whenever (re)opening Rstudio before starting/resuming your work.</p>
</div>
</div>
<div id="eruptions-example" class="section level3" number="4.2.3">
<h3>
<span class="header-section-number">4.2.3</span> Example: US Eruptions<a class="anchor" aria-label="anchor" href="#eruptions-example"><i class="fas fa-link"></i></a>
</h3>
<p>To demonstrate the basic functionality of these different functions, I’ve prepared and exported a dataset on 21<sup>st</sup> century volcanic eruptions (with a recorded start and end date) in the United States from the <a href="https://volcano.si.edu/volcanolist_countries.cfm?country=United%20States">Smithsonian</a> to all the formats listed above so we can practice reading them in from any initial format:</p>
<ul>
<li><a href="data/eruptions_recent.csv"><code>eruptions_recent.csv</code></a></li>
<li><a href="data/eruptions_recent.tsv"><code>eruptions_recent.tsv</code></a></li>
<li><a href="data/eruptions_recent.delim"><code>eruptions_recent.delim</code></a></li>
<li><a href="data/eruptions_recent.xlsx"><code>eruptions_recent.xlsx</code></a></li>
</ul>
<p><a href="https://volcano.si.edu/gallery/ShowImage.cfm?photo=GVP-05273"><img src="https://volcano.si.edu/gallery/photos/GVP-05273.jpg" class="i6"></a></p>
</div>
<div id="csv-file" class="section level3" number="4.2.4">
<h3>
<span class="header-section-number">4.2.4</span> CSV file<a class="anchor" aria-label="anchor" href="#csv-file"><i class="fas fa-link"></i></a>
</h3>
<p>For example, here’s the first few lines of the <a href="data/eruptions_recent.csv"><code>eruptions_recent.csv</code></a> CSV file (for each eruption, we have the volcano name, start and stop dates, duration in days, if its certainty is confirmed, and the VEI or volcano explosivity index).</p>
<pre class="csv"><code>volcano,start,stop,duration,confirmed,vei
Kīlauea,2024-06-03,2024-06-03,0,TRUE,NA
Atka Volcanic Complex,2024-03-27,2024-03-27,0,TRUE,NA
Ahyi,2024-01-01,2024-03-27,86,TRUE,NA
Kanaga,2023-12-18,2023-12-18,0,TRUE,1
Ruby,2023-09-14,2023-09-15,1,TRUE,1</code></pre>
<p>If you have a link to a dataset, you can directly pass it into <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> and it will automagically download the file to your system’s temp directory and read it in. Make sure to save it into a data frame with a sensible name. It’s also usually a good idea to print out the first few lines to check the result and see if everything worked without error.</p>
<div class="sourceCode" id="cb435"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># import readr</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb436"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># read in CSV file from link</span></span>
<span><span class="va">eruptions_recent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://bwu62.github.io/stat240-revamp/data/eruptions_recent.csv"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre class="message"><code>Rows: 73 Columns: 6
── Column specification ──────────────────────────────────────────────
Delimiter: ","
chr  (1): volcano
dbl  (2): duration, vei
lgl  (1): confirmed
date (2): start, stop

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb438"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print first few lines of result to check</span></span>
<span><span class="va">eruptions_recent</span></span></code></pre></div>
<pre><code># A tibble: 73 × 6
   volcano               start      stop       duration confirmed   vei
   &lt;chr&gt;                 &lt;date&gt;     &lt;date&gt;        &lt;dbl&gt; &lt;lgl&gt;     &lt;dbl&gt;
 1 Kīlauea               2024-06-03 2024-06-03        0 TRUE         NA
 2 Atka Volcanic Complex 2024-03-27 2024-03-27        0 TRUE         NA
 3 Ahyi                  2024-01-01 2024-03-27       86 TRUE         NA
 4 Kanaga                2023-12-18 2023-12-18        0 TRUE          1
 5 Ruby                  2023-09-14 2023-09-15        1 TRUE          1
 6 Shishaldin            2023-07-11 2023-11-03      115 TRUE          3
 7 Mauna Loa             2022-11-27 2022-12-10       13 TRUE          0
 8 Ahyi                  2022-11-18 2023-06-11      205 TRUE          1
 9 Kīlauea               2021-09-29 2023-09-16      717 TRUE          0
10 Pavlof                2021-08-05 2022-12-07      489 TRUE          2
# ℹ 63 more rows</code></pre>
<p>Several things to note here:</p>
<ul>
<li>Some diagnostic messages will be printed while reading, as well as any warnings/errors if it encounters anything unusual (no errors/warnings are observed here).</li>
<li>While reading in, R will try to intelligently guess the data types of each column if they’re in a standard format. You can see here that since all columns in the CSV were already very neat and written in a standard format (e.g. dates in <code>YYYY-MM-DD</code>, numbers and logicals written in common syntax, missing values written as NA), everything automagically converted: <code>name</code> is left as a character, <code>start</code> and <code>stop</code> parsed to dates, <code>duration</code> and <code>vei</code> parsed to numeric, and <code>confirmed</code> became logical.
<ul>
<li>If columns are not written in a standard format, this may not work as well (if at all) and you may need to do more data cleaning yourself, which we will touch on later.</li>
</ul>
</li>
<li>You can run just the data frame name again to print the first few rows. This is equivalent to running <code>print(eruptions_recent)</code>.
<ul>
<li>Printing is often a useful way to double check for errors. By default, only the first 10 lines are printed to save space.</li>
</ul>
</li>
<li>If you look in your <a href="https://i.imgur.com/Xo5HE2U.png">Environment tab</a> now, you should see the loaded data frame.
<ul>
<li>Here, you can click on the arrow to see a list of all columns, as well as their names, types, and the first few values.</li>
<li>You can also click here on the object name itself here to open a new tab with a full spreadsheet-like view of the entire data frame, where you can inspect the data frame, and even search for values and sort by columns (note: sorting here is just for preview and does not affect the underlying object).</li>
</ul>
</li>
</ul>
</div>
<div id="tsv-file" class="section level3" number="4.2.5">
<h3>
<span class="header-section-number">4.2.5</span> TSV file<a class="anchor" aria-label="anchor" href="#tsv-file"><i class="fas fa-link"></i></a>
</h3>
<p>The other functions are all similar. Here’s the first few lines of the TSV-version of the same dataset, <a href="data/eruptions_recent.tsv"><code>eruptions_recent.tsv</code></a> (the way these notes are built doesn’t display tabs properly, but if you view the TSV file directly, you can see them).</p>
<pre class="tsv"><code>volcano start   stop    duration    confirmed   vei
Kīlauea 2024-06-03  2024-06-03  0   TRUE    NA
Atka Volcanic Complex   2024-03-27  2024-03-27  0   TRUE    NA
Ahyi    2024-01-01  2024-03-27  86  TRUE    NA
Kanaga  2023-12-18  2023-12-18  0   TRUE    1
Ruby    2023-09-14  2023-09-15  1   TRUE    1</code></pre>
<p>Here it is read in with the <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_tsv()</a></code> function. This time, to save space, I’ve disabled the diagnostic messages by setting <code>show_col_types = FALSE</code> and reduced the final print checking to 5 lines. Otherwise, you can see we have the exact same result.</p>
<div class="sourceCode" id="cb441"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># read in TSV file from link</span></span>
<span><span class="va">eruptions_recent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_tsv</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://bwu62.github.io/stat240-revamp/data/eruptions_recent.tsv"</span>,</span>
<span>  show_col_types <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># print first 5 lines instead of 10 to still check, but save space</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">eruptions_recent</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code># A tibble: 73 × 6
  volcano               start      stop       duration confirmed   vei
  &lt;chr&gt;                 &lt;date&gt;     &lt;date&gt;        &lt;dbl&gt; &lt;lgl&gt;     &lt;dbl&gt;
1 Kīlauea               2024-06-03 2024-06-03        0 TRUE         NA
2 Atka Volcanic Complex 2024-03-27 2024-03-27        0 TRUE         NA
3 Ahyi                  2024-01-01 2024-03-27       86 TRUE         NA
4 Kanaga                2023-12-18 2023-12-18        0 TRUE          1
5 Ruby                  2023-09-14 2023-09-15        1 TRUE          1
# ℹ 68 more rows</code></pre>
</div>
<div id="arbitrary-delimited-file" class="section level3" number="4.2.6">
<h3>
<span class="header-section-number">4.2.6</span> Arbitrary delimited file<a class="anchor" aria-label="anchor" href="#arbitrary-delimited-file"><i class="fas fa-link"></i></a>
</h3>
<p>If your data file has columns delimited (i.e. separated) by other characters, you can use the <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim()</a></code> function, which is a generalization of the previous two to read it in. Just set the <code>delim</code> argument to whatever the delimiter is, and you’re good to go. Here’s the first few lines of <a href="data/eruptions_recent.delim"><code>eruptions_recent.delim</code></a> where the columns are separated by vertical bar <code>|</code> characters, followed by the line of code to import it and check the result.</p>
<pre class="delim"><code>volcano|start|stop|duration|confirmed|vei
Kīlauea|2024-06-03|2024-06-03|0|TRUE|
Atka Volcanic Complex|2024-03-27|2024-03-27|0|TRUE|
Ahyi|2024-01-01|2024-03-27|86|TRUE|
Kanaga|2023-12-18|2023-12-18|0|TRUE|1
Ruby|2023-09-14|2023-09-15|1|TRUE|1</code></pre>
<div class="sourceCode" id="cb444"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># read in | delimited file from link</span></span>
<span><span class="va">eruptions_recent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://bwu62.github.io/stat240-revamp/data/eruptions_recent.delim"</span>,</span>
<span>  delim <span class="op">=</span> <span class="st">"|"</span>,</span>
<span>  show_col_types <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># print first 5 lines</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">eruptions_recent</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code># A tibble: 73 × 6
  volcano               start      stop       duration confirmed   vei
  &lt;chr&gt;                 &lt;date&gt;     &lt;date&gt;        &lt;dbl&gt; &lt;lgl&gt;     &lt;dbl&gt;
1 Kīlauea               2024-06-03 2024-06-03        0 TRUE         NA
2 Atka Volcanic Complex 2024-03-27 2024-03-27        0 TRUE         NA
3 Ahyi                  2024-01-01 2024-03-27       86 TRUE         NA
4 Kanaga                2023-12-18 2023-12-18        0 TRUE          1
5 Ruby                  2023-09-14 2023-09-15        1 TRUE          1
# ℹ 68 more rows</code></pre>
</div>
<div id="xlsx-file" class="section level3" number="4.2.7">
<h3>
<span class="header-section-number">4.2.7</span> XLS(X) file<a class="anchor" aria-label="anchor" href="#xlsx-file"><i class="fas fa-link"></i></a>
</h3>
<p>Data is also commonly encountered as an XLS/XLSX spreadsheet file, which can be read with readxl’s <a href="https://rdrr.io/cran/readxl/man/read_excel.html"><code class="sourceCode r"><span class="kw">read_excel</span>()</code></a> function. The <a href="data/eruptions_recent.xlsx"><code>eruptions_recent.xlsx</code></a> file again has the same dataset but exported to XLSX. Since XLSX is not a text format, it can’t be embedded here, but here’s what the first few rows look like when opened in Excel:</p>
<div class="inline-figure"><img src="https://i.imgur.com/lZbyh6Y.png" class="i6"></div>
<p>Unfortunately, <a href="https://github.com/tidyverse/readxl/issues/278">readxl does not support URLs</a> so the data must be downloaded before loading.</p>
<div class="sourceCode" id="cb446"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load readxl, which is NOT core tidyverse, so must be imported explicitly</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb447"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># I already have the file downloaded to data/</span></span>
<span><span class="co"># inside my current working directory</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.exists</a></span><span class="op">(</span><span class="st">"data/"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb449"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span><span class="op">(</span><span class="st">"data/eruptions_recent.xlsx"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb451"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eruptions_recent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_xlsx</a></span><span class="op">(</span><span class="st">"data/eruptions_recent.xlsx"</span><span class="op">)</span></span>
<span><span class="co"># print first 5 lines</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">eruptions_recent</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code># A tibble: 73 × 6
  volcano            start               stop                duration confirmed   vei
  &lt;chr&gt;              &lt;dttm&gt;              &lt;dttm&gt;                 &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;
1 Kīlauea            2024-06-03 00:00:00 2024-06-03 00:00:00        0 TRUE         NA
2 Atka Volcanic Com… 2024-03-27 00:00:00 2024-03-27 00:00:00        0 TRUE         NA
3 Ahyi               2024-01-01 00:00:00 2024-03-27 00:00:00       86 TRUE         NA
4 Kanaga             2023-12-18 00:00:00 2023-12-18 00:00:00        0 TRUE          1
5 Ruby               2023-09-14 00:00:00 2023-09-15 00:00:00        1 TRUE          1
# ℹ 68 more rows</code></pre>
<p>Oops, looks like start/stop was read as a datetime instead of a date. We’ll learn later how to fix this, but for now we’re moving on.</p>
</div>
<div id="extra-arguments" class="section level3" number="4.2.8">
<h3>
<span class="header-section-number">4.2.8</span> Extra arguments<a class="anchor" aria-label="anchor" href="#extra-arguments"><i class="fas fa-link"></i></a>
</h3>
<p>The files above have been prepared to be easily imported without needing additional arguments, but in general it’s common to need to set other arguments in the functions to get them to import properly. Below is a BRIEF selection of some of the most useful arguments available, loosely ordered by order of importance.</p>
<div class="note">
<p>Some arguments below can be used in several ways, e.g. they may accept either a TRUE/FALSE or a vector of numbers or strings, etc. and may have different behavior depending on the input. We will highlight the most common usages here, but as always see help page for more details!</p>
</div>
<p>The <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code>, <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_tsv()</a></code>, and <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim()</a></code> functions from readr share a single help page, and have many arguments in common (but not all, again see help page). Some useful additional arguments include:</p>
<ul>
<li>
<code>col_names</code> controls handling of column names.
<ul>
<li>Under the default value <code>TRUE</code>, first row of file will be used as column names,</li>
<li>If set to <code>FALSE</code>, placeholder names will be used, and the first line of the file will be treated as data,</li>
<li>If set to a character vector, that vector will be used as the column names, and again first row of file will be treated as data.</li>
</ul>
</li>
<li>
<code>col_types</code> controls handling of column types.
<ul>
<li>The best way to set this is with a compact, single-word string where each letter represents in order from left to right the column type to use:
<ul>
<li>
<code>d</code> = double (i.e. a “normal” numeric value)</li>
<li>
<code>n</code> = number, which is a special readr format that parses “human readable” non-standard numbers such as “$1,000” or “150%” (closely related to the <code><a href="https://readr.tidyverse.org/reference/parse_number.html">parse_number()</a></code> function from section <a href="data-vectors.html#coercion">3.10</a>)</li>
<li>
<code>l</code> = logical, i.e. TRUE/FALSE</li>
<li>
<code>D</code> = date, but this only works if dates are in a standard format like <code>"YYYY-MM-DD"</code>; it will NOT parse non-standard formats</li>
<li>
<code>c</code> = character, for both text data as well as data in a non-standard format, to be parsed later</li>
<li>
<code>_</code> or <code>-</code> will skip a column</li>
</ul>
</li>
</ul>
For example, suppose a data frame had in order from left to right a numeric column, a date column, a character column, a column you want to skip, and a non-standard column that needs to be parsed later; you would set <code>col_types = "dDc_c"</code> to specify this.</li>
<li>
<code>na</code> sets a vector of values to be treated as missing, which by default is <code>c("", "NA")</code>, i.e. empty strings and <code>"NA"</code> will be treated as missing.</li>
<li>
<code>comment</code> is for some data files that have comment lines, usually (but not always) beginning with a hashtag <code>#</code> character. These lines can be ignored by setting <code>comment = "#"</code> for example.</li>
<li>
<code>skip</code> let’s you skip a set number of lines at the beginning of the file.</li>
<li>
<code>n_max</code> allows setting the maximum number of lines read in the file.</li>
<li>
<code>id</code> is useful when the filename contains important information (common when importing data split into many files). Setting <code>id = TRUE</code> saves the name in an <code>id</code> column.</li>
<li>
<code>show_col_types</code> can be set to <code>FALSE</code> to silence diagnostic messages shown after importing.</li>
</ul>
<p>The <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code> function from readxl also has some useful extra arguments. Some of are the same as above, some are similar but slightly different, and some are unique to it (again, see help page). Brief selection of the most important arguments:</p>
<ul>
<li>
<code>sheet</code> and <code>range</code> are unique to <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code> and you control which sheet (i.e. the tabs at the bottom) and what range (i.e. rectangular region of the spreadsheet) to read the data from.
<ul>
<li>
<code>sheet</code> (defaults to the first sheet) can be either a name, a number indicating the position, or even included in the <code>range</code> specification.</li>
<li>
<code>range</code> (defaults to the entire range) can be specified a variety of different ways, but most commonly might be something like <code>"A2:D6"</code> which includes the cells between columns A-D and rows 2-6. See <a href="https://readxl.tidyverse.org/reference/cell-specification.html">this page</a> for examples of other syntax.</li>
</ul>
</li>
<li>
<code>col_names</code> behaves exactly the same as above: the default <code>TRUE</code> uses first row as names, <code>FALSE</code> uses generic placeholder names, but you can also directly set the names with a character vector</li>
<li>
<code>col_types</code> is similar, but instead of a compact string notation, you must use a character vector to specify each column type, with “numeric”, “logical”, “date”, “text”, or “skip” as the possible values</li>
<li>
<code>na</code>: also behaves the same above and accepts a vector of values that represent missing data; the only difference is it defaults to <code>""</code>
</li>
<li>
<code>skip</code> behaves the same as above, and let’s you skip lines at the beginning.</li>
<li>
<code>n_max</code> also behaves the same and sets the maximum number of lines read.</li>
</ul>
</div>
<div id="paths-file-management" class="section level3" number="4.2.9">
<h3>
<span class="header-section-number">4.2.9</span> Paths &amp; file management<a class="anchor" aria-label="anchor" href="#paths-file-management"><i class="fas fa-link"></i></a>
</h3>
<p>We also need to briefly discuss paths and revisit file management. Previously, we had to download a data file and import it from our local storage. For many first time R users, this is a nontrivial task.</p>
<p>In R, to import a downloaded file, you must provide a valid <strong>file path, which is just a reference to a file’s location</strong> on your system. <strong>Paths are always relative to the current working directory</strong>. If you remembered to set your working directory correctly, so that your Rstudio session runs from the same place as your current Rmd file (which is where it knits from), and your path is also correct, then everything should work all the time, no errors.</p>
<p>If your data file is in the same directory as your Rmd file, you can reference it by just using the name. For example, suppose you’re working on <code>hw01.Rmd</code> and your directories look like this:</p>
<div class="paths">
<pre><code>..
└── STAT240/
    └── homework/
        └── hw01/
            ├── hw01.Rmd
            └── hw01_data.csv</code></pre>
</div>
<p>Since <code>hw01_data.csv</code> is in the same directory as <code>hw01.Rmd</code>, you can import it by simply doing <code>read_csv("hw01_data.csv")</code>, again assuming you have your working directory set correctly. However, if your data file is in a subdirectory called <code>data/</code>, i.e. like this:</p>
<div class="paths">
<pre><code>..
└── STAT240/
    └── homework/
        └── hw01/
            ├── hw01.Rmd
            └── data/
                 └── hw01_data.csv</code></pre>
</div>
<p>Then, to import it you would need to write <code>read_csv("data/hw01_data.csv")</code> so that R will know first to go into the <code>data/</code> directory before searching for <code>hw01_data.csv</code> to load. If instead, you had your data file one level up, like this:</p>
<div class="paths">
<pre><code>└── STAT240/
    └── homework/
        ├── hw01_data.csv
        └── hw01/
            └── hw01.Rmd</code></pre>
</div>
<p>Then, to import it you would need to write <code>read_csv("../hw01_data.csv")</code> where the <code>../</code> means to go up a directory level (i.e. exit out of the current folder) before searching for <code>hw01_data.csv</code> to load.</p>
<p>It’s important to note here <strong>there is no single correct way to manage your files</strong>, as long as they are organized and you can easily find what you need. However, if you have no strong preference, we recommend you follow our file organization structure introduced in section <a href="setup.html#setup-files">1.3</a>, i.e. setup your directories like this:</p>
<div class="paths">
<pre><code>..
└── STAT240/
    │
    ├── data/
    │   ├── data_A.csv
    │   ├── data_B.tsv
    │   ├── data_C.xlsx
    │   :    :
    │
    ├── discussion/
    │   │
    │   ├── ds01/
    │   │   └── ds01.Rmd
    │   │
    │   ├── ds02/
    │   :   └── ds02.Rmd
    │
    ├── homework/
    │   │
    │   ├── hw01/
    │   │   └── hw01.Rmd
    │   │
    │   ├── hw02/
    │   :   └── hw02.Rmd
    │
    ├── notes/
    ├── project/
    ├── other/
    :</code></pre>
</div>
<p>Then, as long as you always do the following, things should always just work:</p>
<ol style="list-style-type: decimal">
<li>Always put your homework/discussion Rmd files in <code>homework/hw##/</code> or <code>discussion/ds##/</code> where <code>##</code> is the assignment number.</li>
<li>Always put ALL data in the <code>data/</code> directory, which is exactly 2 levels up from all <code>hw##</code> and <code>ds##</code> directories.</li>
<li>Always reference your data files like <code>"../../data/data_file.csv"</code> which will tell R to go up 2 levels from the current directory, which will take you to the main <code>STAT240/</code> directory, then descend into <code>data/</code> to search for <code>data_file.csv</code>.</li>
</ol>
<div class="tip">
<p>If you’re having trouble finding and importing your file, these additional tips may help:</p>
<ul>
<li>In R, <strong>you can also <span class="k">TAB</span> autocomplete paths</strong>. Make sure your working directory is set, then start a path with <code>""</code>, place your cursor between the quotes, and hit <span class="k">TAB</span>. You will see a popup menu showing files in your current directory. From here, either select a subdirectory to <span class="k">TAB</span> into again, or type <span class="k">.</span><span class="k">.</span><span class="k">/</span> to go up a directory level, repeat these steps as necessary until you find your file, then hit <span class="k">ENTER</span> to confirm the selection.</li>
<li>If you’re desperate, you can also use the graphical <a href="https://i.imgur.com/EBpswIS.png">readr import tool</a> found in the Environment tab, which opens a <a href="https://i.imgur.com/2fc4kQa.png">dialog box</a> where you can browse to a file, set arguments with convenient dropdown menus, see a preview of what the data would look like with those settings, and best of all: in the corner you can see <strong>what code is generated that can do all this</strong> which you can copy into your Rmd file. As always, make sure your working directory is set beforehand!</li>
</ul>
</div>
<div class="note">
<p>Paths in R <strong>always use forward <span class="k">/</span> slashes</strong>, NEVER back <span class="k">\</span> slashes, even though back slashes are used by Windows file systems. This is just R’s syntax.</p>
</div>
</div>
</div>
<div id="working-with-data-frames" class="section level2" number="4.3">
<h2>
<span class="header-section-number">4.3</span> Working with data frames<a class="anchor" aria-label="anchor" href="#working-with-data-frames"><i class="fas fa-link"></i></a>
</h2>
<p>We will be using data frames extensively throughout this class. Let’s start by learning some basic manipulations with them. First, I’m going to reload the <code>eruptions_recent</code> dataset using the CSV file, so that we have the correct <code>start</code>/<code>stop</code> columns.</p>
<div class="sourceCode" id="cb457"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set R to print fewer rows by default, to save space in demos below</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>pillar.print_min <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># reload dataset</span></span>
<span><span class="va">eruptions_recent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://bwu62.github.io/stat240-revamp/data/eruptions_recent.csv"</span>,</span>
<span>  show_col_types <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># print first few rows</span></span>
<span><span class="va">eruptions_recent</span></span></code></pre></div>
<pre><code># A tibble: 73 × 6
  volcano               start      stop       duration confirmed   vei
  &lt;chr&gt;                 &lt;date&gt;     &lt;date&gt;        &lt;dbl&gt; &lt;lgl&gt;     &lt;dbl&gt;
1 Kīlauea               2024-06-03 2024-06-03        0 TRUE         NA
2 Atka Volcanic Complex 2024-03-27 2024-03-27        0 TRUE         NA
3 Ahyi                  2024-01-01 2024-03-27       86 TRUE         NA
4 Kanaga                2023-12-18 2023-12-18        0 TRUE          1
5 Ruby                  2023-09-14 2023-09-15        1 TRUE          1
# ℹ 68 more rows</code></pre>
<div id="basic-df" class="section level3" number="4.3.1">
<h3>
<span class="header-section-number">4.3.1</span> Basic operations<a class="anchor" aria-label="anchor" href="#basic-df"><i class="fas fa-link"></i></a>
</h3>
<p>Here are a few basic operations for working with data frames: <code><a href="https://rdrr.io/r/base/nrow.html">nrow()</a></code>, <code><a href="https://rdrr.io/r/base/nrow.html">ncol()</a></code>, and <code><a href="https://rdrr.io/r/base/dim.html">dim()</a></code> can show the number of rows and/or columns; <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> can show a quick summary of each column; <code><a href="https://rdrr.io/r/base/names.html">names()</a></code>/<code><a href="https://rdrr.io/r/base/colnames.html">colnames()</a></code> can both get and set column names; <code><a href="https://rdrr.io/r/base/colnames.html">rownames()</a></code> can both get and set row names.</p>
<div class="sourceCode" id="cb459"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get number of rows and columns</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">eruptions_recent</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 73</code></pre>
<div class="sourceCode" id="cb461"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">eruptions_recent</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 6</code></pre>
<div class="sourceCode" id="cb463"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get both together using dim()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">eruptions_recent</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 73  6</code></pre>
<div class="sourceCode" id="cb465"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># show different summary of each column, depending on the column type</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">eruptions_recent</span><span class="op">)</span></span></code></pre></div>
<pre><code>   volcano              start                 stop               duration     
 Length:73          Min.   :2001-02-02   Min.   :2001-04-15   Min.   :   0.0  
 Class :character   1st Qu.:2006-11-25   1st Qu.:2007-03-03   1st Qu.:   6.0  
 Mode  :character   Median :2011-07-19   Median :2012-02-18   Median :  71.0  
                    Mean   :2012-11-07   Mean   :2013-05-18   Mean   : 192.1  
                    3rd Qu.:2019-07-23   3rd Qu.:2019-12-07   3rd Qu.: 195.0  
                    Max.   :2024-06-03   Max.   :2024-07-23   Max.   :1491.0  
                                                                              
 confirmed            vei       
 Mode :logical   Min.   :0.000  
 FALSE:4         1st Qu.:1.000  
 TRUE :69        Median :2.000  
                 Mean   :1.864  
                 3rd Qu.:3.000  
                 Max.   :4.000  
                 NA's   :7      </code></pre>
<div class="sourceCode" id="cb467"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># show names of the variable columns</span></span>
<span><span class="co"># note names() and colnames() are completely identical for data frames</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">eruptions_recent</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "volcano"   "start"     "stop"      "duration"  "confirmed" "vei"      </code></pre>
<div class="sourceCode" id="cb469"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># you can also set individual, specific, or even all names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">eruptions_recent</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"START"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">eruptions_recent</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"VOLCANO"</span>, <span class="st">"DURATION"</span>, <span class="st">"CONFIRMED"</span>, <span class="st">"VEI"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">eruptions_recent</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "VOLCANO"   "START"     "stop"      "DURATION"  "CONFIRMED" "VEI"      </code></pre>
<div class="sourceCode" id="cb471"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># let's reset the names back to their original values</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">eruptions_recent</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"volcano"</span>, <span class="st">"start"</span>, <span class="st">"stop"</span>, <span class="st">"duration"</span>, <span class="st">"confirmed"</span>, <span class="st">"vei"</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># data frames may also have row names, though most don't</span></span>
<span><span class="co"># if there are no row names, they just show as numbers</span></span>
<span><span class="co"># (this is not generally a commonly used feature)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">eruptions_recent</span><span class="op">)</span></span></code></pre></div>
<pre><code> [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10" "11" "12" "13" "14" "15" "16"
[17] "17" "18" "19" "20" "21" "22" "23" "24" "25" "26" "27" "28" "29" "30" "31" "32"
[33] "33" "34" "35" "36" "37" "38" "39" "40" "41" "42" "43" "44" "45" "46" "47" "48"
[49] "49" "50" "51" "52" "53" "54" "55" "56" "57" "58" "59" "60" "61" "62" "63" "64"
[65] "65" "66" "67" "68" "69" "70" "71" "72" "73"</code></pre>
</div>
<div id="subsetting-data-frames" class="section level3" number="4.3.2">
<h3>
<span class="header-section-number">4.3.2</span> Subsetting data frames<a class="anchor" aria-label="anchor" href="#subsetting-data-frames"><i class="fas fa-link"></i></a>
</h3>
<p>You can extract and manipulate subsets of a data frame along either dimension. Most commonly, you may want to use <code>$</code> to either pull out a single column as a vector, modify an existing column in-place, or even create a new column.</p>
<div class="sourceCode" id="cb473"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># extract the vei column</span></span>
<span><span class="va">eruptions_recent</span><span class="op">$</span><span class="va">duration</span></span></code></pre></div>
<pre><code> [1]    0    0   86    0    1  115   13  205  717  489   39 1155   36  822  154    0
[17]  195   30  286   39    6   53  110   62  253 1005  125    3    6   23  519  121
[33]   44 1021    0    0 1491  131    1    3    2  100   71    0  108   19    2   38
[49]    8    0  256   29  422    4   98    0   98  188  264  139   58  259   71   41
[65] 1213  509  150  202   63  180    1    1   72</code></pre>
<div class="sourceCode" id="cb475"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># change the confirmed column to 1s and 0s in-place</span></span>
<span><span class="va">eruptions_recent</span><span class="op">$</span><span class="va">confirmed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">eruptions_recent</span><span class="op">$</span><span class="va">confirmed</span><span class="op">)</span></span>
<span><span class="va">eruptions_recent</span></span></code></pre></div>
<pre><code># A tibble: 73 × 6
  volcano               start      stop       duration confirmed   vei
  &lt;chr&gt;                 &lt;date&gt;     &lt;date&gt;        &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;
1 Kīlauea               2024-06-03 2024-06-03        0         1    NA
2 Atka Volcanic Complex 2024-03-27 2024-03-27        0         1    NA
3 Ahyi                  2024-01-01 2024-03-27       86         1    NA
4 Kanaga                2023-12-18 2023-12-18        0         1     1
5 Ruby                  2023-09-14 2023-09-15        1         1     1
# ℹ 68 more rows</code></pre>
<div class="sourceCode" id="cb477"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># add a new column giving just the year the eruption started in</span></span>
<span><span class="va">eruptions_recent</span><span class="op">$</span><span class="va">start_year</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html">year</a></span><span class="op">(</span><span class="va">eruptions_recent</span><span class="op">$</span><span class="va">start</span><span class="op">)</span></span>
<span><span class="va">eruptions_recent</span></span></code></pre></div>
<pre><code># A tibble: 73 × 7
  volcano               start      stop       duration confirmed   vei start_year
  &lt;chr&gt;                 &lt;date&gt;     &lt;date&gt;        &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
1 Kīlauea               2024-06-03 2024-06-03        0         1    NA       2024
2 Atka Volcanic Complex 2024-03-27 2024-03-27        0         1    NA       2024
3 Ahyi                  2024-01-01 2024-03-27       86         1    NA       2024
4 Kanaga                2023-12-18 2023-12-18        0         1     1       2023
5 Ruby                  2023-09-14 2023-09-15        1         1     1       2023
# ℹ 68 more rows</code></pre>
<p>You can also use <code>[]</code> and <code>[[]]</code> to subset columns by name or position, the difference being <code>[]</code> returns a data frame and <code>[[]]</code> returns the vector directly.</p>
<div class="sourceCode" id="cb479"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># extract the vei column, keeping the result as a data frame</span></span>
<span><span class="va">eruptions_recent</span><span class="op">[</span><span class="st">"vei"</span><span class="op">]</span></span></code></pre></div>
<pre><code># A tibble: 73 × 1
    vei
  &lt;dbl&gt;
1    NA
2    NA
3    NA
4     1
5     1
# ℹ 68 more rows</code></pre>
<div class="sourceCode" id="cb481"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># extract the same column but by position and directly as a vector</span></span>
<span><span class="va">eruptions_recent</span><span class="op">[[</span><span class="fl">6</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code> [1] NA NA NA  1  1  3  0  1  0  2  2  2  1  2  0  3  1 NA  3  1  1  1  1  1  3  2  3
[28]  3  3  2  1  3  3  0  2  2  2  2 NA  2  3  1  2  2  3  2  4  4  1 NA  2  2  2  1
[55]  1  2  2  1  3  3  1  2  1  2  2  3  2  2  3  1 NA  0  3</code></pre>
<p>The <code>[]</code> operator has an additional usage of <code>[rows,cols]</code> where <code>rows</code>, <code>cols</code> can both be vectors specifying subsets by name or by position. Leaving one of them empty means return all of them.</p>
<div class="sourceCode" id="cb483"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># extract just the first 5 start/stop times</span></span>
<span><span class="va">eruptions_recent</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"start"</span>, <span class="st">"stop"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code># A tibble: 5 × 2
  start      stop      
  &lt;date&gt;     &lt;date&gt;    
1 2024-06-03 2024-06-03
2 2024-03-27 2024-03-27
3 2024-01-01 2024-03-27
4 2023-12-18 2023-12-18
5 2023-09-14 2023-09-15</code></pre>
<div class="sourceCode" id="cb485"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># extract the entire 10th row</span></span>
<span><span class="va">eruptions_recent</span><span class="op">[</span><span class="fl">10</span>, <span class="op">]</span></span></code></pre></div>
<pre><code># A tibble: 1 × 7
  volcano start      stop       duration confirmed   vei start_year
  &lt;chr&gt;   &lt;date&gt;     &lt;date&gt;        &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
1 Pavlof  2021-08-05 2022-12-07      489         1     2       2021</code></pre>
<div class="sourceCode" id="cb487"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># you can also use negative indices to remove specific items</span></span>
<span><span class="co"># e.g. this removes rows 1-10 and also removes the 7th column (start_year)</span></span>
<span><span class="va">eruptions_recent</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>, <span class="op">-</span><span class="fl">7</span><span class="op">]</span></span></code></pre></div>
<pre><code># A tibble: 63 × 6
  volcano       start      stop       duration confirmed   vei
  &lt;chr&gt;         &lt;date&gt;     &lt;date&gt;        &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;
1 Pagan         2021-07-29 2021-09-06       39         1     2
2 Great Sitkin  2021-05-25 2024-07-23     1155         1     2
3 Veniaminof    2021-02-28 2021-04-05       36         1     1
4 Semisopochnoi 2021-02-02 2023-05-05      822         1     2
5 Kīlauea       2020-12-20 2021-05-23      154         1     0
# ℹ 58 more rows</code></pre>
<p>This is commonly used in data science to split up a dataset. For example, suppose you wanted to randomly partition your data into an 80% training and 20% testing set. You can first use <a href="https://rdrr.io/r/base/sample.html"><code class="sourceCode r"><span class="kw">sample</span>(n,x)</code></a> to randomly select <code>x</code> rows out of <code>n</code>, then use both positive and negative row subsetting syntax to get both partitions:</p>
<div class="sourceCode" id="cb489"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># define total number of rows and 20% for testing data</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">eruptions_recent</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">n</span> <span class="op">*</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="co"># randomly draw 20% of the row numbers</span></span>
<span><span class="va">test_rows</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">x</span><span class="op">)</span></span>
<span><span class="va">test_rows</span></span></code></pre></div>
<pre><code> [1] 68 39  1 34 43 14 59 51 21 42 54 46 10  7  9</code></pre>
<div class="sourceCode" id="cb491"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># split dataset using the subsetting syntax we just learned</span></span>
<span><span class="va">eruptions_recent_test</span>  <span class="op">&lt;-</span> <span class="va">eruptions_recent</span><span class="op">[</span> <span class="va">test_rows</span>, <span class="op">]</span></span>
<span><span class="va">eruptions_recent_train</span> <span class="op">&lt;-</span> <span class="va">eruptions_recent</span><span class="op">[</span><span class="op">-</span><span class="va">test_rows</span>, <span class="op">]</span></span>
<span><span class="va">eruptions_recent_test</span></span></code></pre></div>
<pre><code># A tibble: 15 × 7
   volcano                  start      stop       duration confirmed   vei start_year
   &lt;chr&gt;                    &lt;date&gt;     &lt;date&gt;        &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
 1 Veniaminof               2004-02-16 2004-09-05      202         1     2       2004
 2 Cleveland                2010-09-11 2010-09-12        1         0    NA       2010
 3 Kīlauea                  2024-06-03 2024-06-03        0         1    NA       2024
 4 Mariana Back-Arc Segmen… 2013-02-13 2015-12-01     1021         1     0       2013
 5 Cleveland                2009-10-02 2009-12-12       71         1     2       2009
 6 Semisopochnoi            2021-02-02 2023-05-05      822         1     2       2021
 7 Cleveland                2006-02-06 2006-10-28      264         1     3       2006
 8 Anatahan                 2007-11-27 2008-08-09      256         1     2       2007
 9 Great Sitkin             2019-06-01 2019-06-07        6         1     1       2019
10 Pagan                    2010-05-03 2010-08-11      100         1     1       2010
11 Pagan                    2006-12-04 2006-12-08        4         1     1       2006
12 Cleveland                2009-01-02 2009-01-21       19         1     2       2009
13 Pavlof                   2021-08-05 2022-12-07      489         1     2       2021
14 Mauna Loa                2022-11-27 2022-12-10       13         1     0       2022
15 Kīlauea                  2021-09-29 2023-09-16      717         1     0       2021</code></pre>
<div class="sourceCode" id="cb493"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">eruptions_recent_train</span></span></code></pre></div>
<pre><code># A tibble: 58 × 7
  volcano               start      stop       duration confirmed   vei start_year
  &lt;chr&gt;                 &lt;date&gt;     &lt;date&gt;        &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
1 Atka Volcanic Complex 2024-03-27 2024-03-27        0         1    NA       2024
2 Ahyi                  2024-01-01 2024-03-27       86         1    NA       2024
3 Kanaga                2023-12-18 2023-12-18        0         1     1       2023
4 Ruby                  2023-09-14 2023-09-15        1         1     1       2023
5 Shishaldin            2023-07-11 2023-11-03      115         1     3       2023
# ℹ 53 more rows</code></pre>
<p>If you ever need to recombine them, just use <code><a href="https://rdrr.io/r/base/cbind.html">rbind()</a></code> which will bind rows together from multiple data frames, as long as they have the exact same columns (both name and type).</p>
<div class="sourceCode" id="cb495"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># note the resulting rows will be in a different order,</span></span>
<span><span class="co"># but it's the same data frame we started out with</span></span>
<span><span class="va">eruptions_recent_recombined</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">eruptions_recent_test</span>, <span class="va">eruptions_recent_train</span><span class="op">)</span></span>
<span><span class="va">eruptions_recent_recombined</span></span></code></pre></div>
<pre><code># A tibble: 73 × 7
  volcano                   start      stop       duration confirmed   vei start_year
  &lt;chr&gt;                     &lt;date&gt;     &lt;date&gt;        &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
1 Veniaminof                2004-02-16 2004-09-05      202         1     2       2004
2 Cleveland                 2010-09-11 2010-09-12        1         0    NA       2010
3 Kīlauea                   2024-06-03 2024-06-03        0         1    NA       2024
4 Mariana Back-Arc Segment… 2013-02-13 2015-12-01     1021         1     0       2013
5 Cleveland                 2009-10-02 2009-12-12       71         1     2       2009
# ℹ 68 more rows</code></pre>

</div>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/@xiee/utils/js/external-link.min.js" defer></script><script>
  $(function(){
    $(".note").addClass("alert alert-warning");
  });
  $(function(){
    $(".tip").addClass("alert alert-success");
  });
  $(function(){
    $(".def").addClass("alert alert-info");
  });
  $(function(){
    $(".eg").addClass("alert alert-secondary");
  });
  $(function(){
    $(".col-lg-3").addClass("col-lg-2").removeClass("col-lg-3");
  });
  $(function(){
    $(".col-lg-7").addClass("col-lg-8").removeClass("col-lg-7");
  });
</script><!-- https://stackoverflow.com/a/37839683/25278020 --><script>
  $(document).ready(function() {

  $chunks = $('.fold');

  $chunks.each(function () {

    // add button to source code chunks
    if ( $(this).hasClass('s') ) {
      $('pre.r', this).prepend("<div class=\"showopt\">Show Source</div><br style=\"line-height:22px;\"/>");
      $('pre.r', this).children('code').attr('class', 'folded');
    }

    // add button to output chunks
    if ( $(this).hasClass('o') ) {
      $('pre:not(.r)', this).has('code').prepend("<div class=\"showopt\">Show Output</div><br style=\"line-height:22px;\"/>");
      $('pre:not(.r)', this).children('code:not(r)').addClass('folded');

      // add button to plots
      $(this).find('img').wrap('<pre class=\"plot\"></pre>');
      $('pre.plot', this).prepend("<div class=\"showopt\">Show Plot</div><br style=\"line-height:22px;\"/>");
      $('pre.plot', this).children('img').addClass('folded');

    }
  });

  // hide all chunks when document is loaded
  $('.folded').css('display', 'none')

  // function to toggle the visibility
  $('.showopt').click(function() {
    var label = $(this).html();
    if (label.indexOf("Show") >= 0) {
      $(this).html(label.replace("Show", "Hide"));
    } else {
      $(this).html(label.replace("Hide", "Show"));
    }
    $(this).siblings('code, img').slideToggle('fast', 'swing');
  });
});

</script><!-- https://www.tutorialrepublic.com/faq/how-to-change-href-attribute-of-a-hyperlink-using-jquery.php--><script>
  $(document).ready(function(){
    $("a.anchorjs-link").each(function(){
      var oldUrl = $(this).attr("href"); // Get current url
      var newUrl = oldUrl.replace(/^#(\d+-)+/,"#"); // Create new url
      $(this).attr("href", "#" + $(this).closest("div").attr("id"));  // Set href value
      $(this).attr("title", location.protocol + "//" + location.host + location.pathname + $(this).attr("href")); // Set title value
    });
  });
</script><!-- https://stackoverflow.com/a/10415599/25278020 --><script>
  var observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
        if (mutation.addedNodes && mutation.addedNodes.length > 0) {
            // element added to DOM
            var hasClass = [].some.call(mutation.addedNodes, function(el) {
                return el.classList.contains('bs-popover-top')
            });
            if (hasClass) {
              $("div.bs-popover-top a").each(function(){
                $(this).attr("target", "_blank");
              });
          }
        }
    });
});

var config = {
    attributes: true,
    childList: true,
    characterData: true
};

observer.observe(document.body, config);
</script><div class="chapter-nav">
<div class="prev"><a href="data-vectors.html"><span class="header-section-number">3</span> Data Vectors</a></div>
<div class="next"><a href="data-exploration.html">Data Exploration</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#data-frames"><span class="header-section-number">4</span> Data Frames</a></li>
<li><a class="nav-link" href="#creating-dfs"><span class="header-section-number">4.1</span> Creating data frames</a></li>
<li>
<a class="nav-link" href="#importing-data-frames"><span class="header-section-number">4.2</span> Importing data frames</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#aside-file-formats-extensions"><span class="header-section-number">4.2.1</span> Aside: file formats &amp; extensions</a></li>
<li><a class="nav-link" href="#importing-functions"><span class="header-section-number">4.2.2</span> Importing functions</a></li>
<li><a class="nav-link" href="#eruptions-example"><span class="header-section-number">4.2.3</span> Example: US Eruptions</a></li>
<li><a class="nav-link" href="#csv-file"><span class="header-section-number">4.2.4</span> CSV file</a></li>
<li><a class="nav-link" href="#tsv-file"><span class="header-section-number">4.2.5</span> TSV file</a></li>
<li><a class="nav-link" href="#arbitrary-delimited-file"><span class="header-section-number">4.2.6</span> Arbitrary delimited file</a></li>
<li><a class="nav-link" href="#xlsx-file"><span class="header-section-number">4.2.7</span> XLS(X) file</a></li>
<li><a class="nav-link" href="#extra-arguments"><span class="header-section-number">4.2.8</span> Extra arguments</a></li>
<li><a class="nav-link" href="#paths-file-management"><span class="header-section-number">4.2.9</span> Paths &amp; file management</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#working-with-data-frames"><span class="header-section-number">4.3</span> Working with data frames</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#basic-df"><span class="header-section-number">4.3.1</span> Basic operations</a></li>
<li><a class="nav-link" href="#subsetting-data-frames"><span class="header-section-number">4.3.2</span> Subsetting data frames</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/bwu62/stat240-revamp/blob/master/04-data-frames.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/bwu62/stat240-revamp/edit/master/04-data-frames.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>STAT 240 Revamp</strong>" was written by Bi Cheng Wu, with help from Bret Larget and Cameron Jones. It was last built on 2024-10-04.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
