<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 3 Data Vectors | STAT 240 Revamp</title>
<meta name="author" content="Bi Cheng Wu, with help from Bret Larget and Cameron Jones">
<meta name="description" content="\(   \def\e{\operatorname{E}}   \def\p{\operatorname{P}}   \def\var{\operatorname{Var}}   \def\sd{\operatorname{SD}}   \def\bin{\operatorname{Bin}}   \def\n{\operatorname{N}}  \)  In this chapter,...">
<meta name="generator" content="bookdown 0.44.1 with bs4_book()">
<meta property="og:title" content="Chapter 3 Data Vectors | STAT 240 Revamp">
<meta property="og:type" content="book">
<meta property="og:url" content="https://bwu62.github.io/stat240-revamp/data-vectors.html">
<meta property="og:description" content="\(   \def\e{\operatorname{E}}   \def\p{\operatorname{P}}   \def\var{\operatorname{Var}}   \def\sd{\operatorname{SD}}   \def\bin{\operatorname{Bin}}   \def\n{\operatorname{N}}  \)  In this chapter,...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 3 Data Vectors | STAT 240 Revamp">
<meta name="twitter:description" content="\(   \def\e{\operatorname{E}}   \def\p{\operatorname{P}}   \def\var{\operatorname{Var}}   \def\sd{\operatorname{SD}}   \def\bin{\operatorname{Bin}}   \def\n{\operatorname{N}}  \)  In this chapter,...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Roboto_Mono-0.4.10/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.9.0/transition.js"></script><script src="libs/bs3compat-0.9.0/tabs.js"></script><script src="libs/bs3compat-0.9.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="libs/plotly-binding-4.11.0/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.2/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-E0YDB40HWY"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-E0YDB40HWY');
    </script><link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
<link rel="manifest" href="icons/site.webmanifest">
<link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
<!-- https://www.bryanbraun.com/anchorjs/ --><script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script><script>
      // Add anchors on DOMContentLoaded
    document.addEventListener('DOMContentLoaded', function(event) {
      anchors.add('h1');
      anchors.add();
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">STAT 240 Revamp</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome!</a></li>
<li><a class="" href="setup.html"><span class="header-section-number">1</span> Setup</a></li>
<li class="book-part">R Crash Course</li>
<li><a class="" href="rstudio-intro.html"><span class="header-section-number">2</span> Intro to R/Rstudio</a></li>
<li><a class="active" href="data-vectors.html"><span class="header-section-number">3</span> Data Vectors</a></li>
<li><a class="" href="data-frames.html"><span class="header-section-number">4</span> Data Frames</a></li>
<li><a class="" href="data-exploration.html">Data Exploration</a></li>
<li><a class="" href="descriptive.html"><span class="header-section-number">5</span> Descriptive Statistics</a></li>
<li><a class="" href="data-visualization.html"><span class="header-section-number">6</span> Data Visualization</a></li>
<li><a class="" href="data-transformation.html">Data Transformation</a></li>
<li><a class="" href="intro-to-dplyr.html"><span class="header-section-number">7</span> Intro to dplyr</a></li>
<li><a class="" href="advanced-operations.html"><span class="header-section-number">8</span> Advanced Operations</a></li>
<li><a class="" href="data-modeling.html">Data Modeling</a></li>
<li><a class="" href="overview.html"><span class="header-section-number">9</span> Overview</a></li>
<li><a class="" href="intro-to-probability.html"><span class="header-section-number">10</span> Intro to Probability</a></li>
<li><a class="" href="sampling-inference.html"><span class="header-section-number">11</span> Sampling &amp; Inference</a></li>
<li><a class="" href="inference-types.html">Inference Types</a></li>
<li><a class="" href="proportions.html"><span class="header-section-number">12</span> Proportions</a></li>
<li><a class="" href="means.html"><span class="header-section-number">13</span> Means</a></li>
<li><a class="" href="regression.html"><span class="header-section-number">14</span> Regression</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="datasets.html"><span class="header-section-number">A</span> Datasets</a></li>
<li><a class="" href="cheat-sheets.html"><span class="header-section-number">B</span> Cheat Sheets</a></li>
<li><a class="" href="additional-resources.html"><span class="header-section-number">C</span> Additional Resources</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/bwu62/stat240-revamp">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><span style="display:none">
  \(
    \def\e{\operatorname{E}}
    \def\p{\operatorname{P}}
    \def\var{\operatorname{Var}}
    \def\sd{\operatorname{SD}}
    \def\bin{\operatorname{Bin}}
    \def\n{\operatorname{N}}
  \)
</span>
<div id="data-vectors" class="section level1" number="3">
<h1>
<span class="header-section-number">3</span> Data Vectors<a class="anchor" aria-label="anchor" href="#data-vectors"><i class="fas fa-link"></i></a>
</h1>
<p>In this chapter, we will introduce you to handling data in R, starting with vectors. <strong>Vectors are arguably the MOST fundamental data structure in R</strong>. We briefly saw an example of vectors last chapter in section <a href="rstudio-intro.html#summary-functions">2.3.6</a> on summary functions:</p>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create an example dataset of a small sample of numbers</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">6</span>, <span class="fl">6</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">data</span></span></code></pre></div>
<pre><code>[1] 3 6 6 2 4 1 5</code></pre>
<p>Last chapter, we mostly used vectors to demonstrate summary functions like <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code>, <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>, or <code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code>, but this is just the tip of the iceberg. In fact, <strong>most functions in R run on vectors directly, <em>one value at a time</em></strong>, and are actually most efficient when used this way.</p>
<div class="note">
<p>In R, a vector can only have ONE “type” (or “class”) of object at a time, e.g. a vector of ALL numbers, or a vector of ALL characters, or a vector of ALL dates, etc. Vectors of mixed-type are NOT allowed in R.</p>
<p>Also, we have actually been working with vectors all along. That’s because single values in R are in fact vectors of length 1. E.g. take any number, let’s say 5; we can use <code><a href="https://rdrr.io/r/base/vector.html">is.vector()</a></code> to show that this is in fact a vector of length 1.</p>
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/vector.html">is.vector</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 1</code></pre>
<p>This is why vectors are the most fundamental structure. It may be useful going forward to think of numbers instead as numeric vectors, logicals (TRUE/FALSE) as logical vectors, characters (i.e. strings) as character vectors, etc. <strong>Everything runs on vectors</strong>!</p>
</div>
<div id="types-of-vectors" class="section level2" number="3.1">
<h2>
<span class="header-section-number">3.1</span> Types of vectors<a class="anchor" aria-label="anchor" href="#types-of-vectors"><i class="fas fa-link"></i></a>
</h2>
<p>There are LOTS of types of data that vectors can hold, from real to complex numbers, characters to raw byte-data, and even dates and times.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;Technically, there are only 6 fundamental, or &lt;a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#:~:text=R%20has,%20table"&gt;“atomic”&lt;/a&gt; types, but some of these can represent multiple “classes” of objects. See the section on &lt;a href="https://adv-r.hadley.nz/vectors-chap.html"&gt;Vectors&lt;/a&gt; from Hadley Wickham’s excellent “&lt;em&gt;Advanced R&lt;/em&gt;” book for the minutiae. I know this footnote is overly pedantic and technical, but I don’t want to incur the wrath of CS nerds.&lt;/p&gt;'><sup>10</sup></a> In this class, we will only deal with the following 4 types of vectors:</p>
<ul>
<li>
<strong>Numeric</strong> vectors, which contain real numbers. Generally, R functions don’t distinguish between integers and decimal numbers (also called “doubles” or “floats”) so treat all numbers as decimal-valued real numbers.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;For the CS students, R represents all numbers by default as double-precision floating-point numbers as per &lt;a href="https://en.wikipedia.org/wiki/IEEE_754"&gt;IEC 60559/IEEE 754&lt;/a&gt; specifications. There are no single precision values in R. You can force a number to be a &lt;a href="https://rdrr.io/r/base/integer.html"&gt;32-bit signed integer&lt;/a&gt; by adding an &lt;code&gt;L&lt;/code&gt; to the end, e.g. &lt;code&gt;1L&lt;/code&gt;, but this is extremely rare in data science and generally offers no real, tangible advantages.&lt;/p&gt;'><sup>11</sup></a>
</li>
<li>
<strong>Logical</strong> vectors, which contain only <code>TRUE</code>/<code>FALSE</code> values. Usually, these arise from logical comparison operators or other functions that check if some condition is satisfied. Remember that in computations, TRUE becomes 1 and FALSE becomes 0.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Again, for the CS nerds, 0 in R is considered “falsy” and all other numbers are considered “truthy”. E.g. try running &lt;code&gt;x &amp;amp; TRUE&lt;/code&gt; for zero and non-zero x and observe the output.&lt;/p&gt;"><sup>12</sup></a>
</li>
<li>
<strong>Character</strong> vectors, which contain characters (often also called “strings”). These are basically categorical or text data. E.g. you may have groups “A” and “B”, or sex “Male” and “Female”. You can even have sentences, paragraphs, or entire bodies of text in a character. We will only briefly touch on processing text data in this class.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;CS people, looking at you again. Some languages distinguish between “character” type, which can only be just a single character; and “string” type, which are sequences of characters. In R, there is no such distinction; characters and strings are synonymous. Note this means you cannot “slice” through a string as if it’s just a list of characters in R like some other languages.&lt;/p&gt;"><sup>13</sup></a>
</li>
<li>Lastly, <strong>date</strong> vectors will also be covered. These are actually closely related to numeric vectors (more on this later). These are ubiquitous in data science and thus deserving of inclusion.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;I don’t have anything pedantic to add here, but all the other vectors got footnotes so I didn’t want dates to feel left out :( … &lt;br&gt;&lt;br&gt; …well ok, since you bothered to click this, I’ll give you something. We’ll discuss this later too, but here’s a sneak preview: dates in R, like in many other languages, are stored as &lt;a href="https://rdrr.io/r/base/Dates.html"&gt;number of days after Jan 1&lt;sup&gt;st&lt;/sup&gt; 1970&lt;/a&gt;, which is often ominously referred to as the “Epoch”. Why 1/1/70? Because reportedly it &lt;a href="https://retrocomputing.stackexchange.com/a/25599"&gt;“&lt;em&gt;seemed to be as good as any&lt;/em&gt;”&lt;/a&gt;. &lt;br&gt;&lt;br&gt; This is why dates are basically numeric vectors with extra steps. However, like with anything, the devil’s in the details, and learning to work efficiently with dates is not trivial.&lt;/p&gt;'><sup>14</sup></a>
<ul>
<li>Note: we only cover dates themselves, not date + time values (also called datetime) since these are actually quite different data types and we only have so many lectures.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;Similar-ish to dates, datetimes are often stored as a (possibly decimal) &lt;a href="https://rdrr.io/r/base/DateTimeClasses.html"&gt;number of seconds after midnight of Jan 1&lt;sup&gt;st&lt;/sup&gt; 1970&lt;/a&gt; called a POSIXct object, although R confusingly also has a whole other type of datetime object called POSIXlt where each date/time component is stored as an element of a &lt;a href="https://jennybc.github.io/purrr-tutorial/bk00_vectors-and-lists.html"&gt;list&lt;/a&gt; (which is a whole other giant beast we don’t even remotely have time to get into). See Hadley Wickham’s page on &lt;a href="https://r4ds.hadley.nz/datetimes.html"&gt;datetime&lt;/a&gt; from his book “&lt;em&gt;R for Data Science&lt;/em&gt;” for more info on datetime objects.&lt;/p&gt;'><sup>15</sup></a>
</li>
</ul>
</li>
</ul>
</div>
<div id="numeric-vectors" class="section level2" number="3.2">
<h2>
<span class="header-section-number">3.2</span> Numeric vectors<a class="anchor" aria-label="anchor" href="#numeric-vectors"><i class="fas fa-link"></i></a>
</h2>
<p>Let’s start with numeric vectors. For example, suppose we want to double, or square, or take the arc-tangent, or find the rounded base-2 logarithm of each <code>data</code> value, we can just do so directly on the vector, and it runs one value at a time:</p>
<div class="sourceCode" id="cb127"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">*</span> <span class="fl">2</span></span></code></pre></div>
<pre><code>[1]  6 12 12  4  8  2 10</code></pre>
<div class="sourceCode" id="cb129"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span><span class="op">^</span><span class="fl">2</span></span></code></pre></div>
<pre><code>[1]  9 36 36  4 16  1 25</code></pre>
<div class="sourceCode" id="cb131"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Trig.html">atan</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 1.2490458 1.4056476 1.4056476 1.1071487 1.3258177 0.7853982 1.3734008</code></pre>
<div class="sourceCode" id="cb133"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log2</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 2 3 3 1 2 0 2</code></pre>
<p>Note you can also use <code>data</code> on the other side of these operators, or as the argument to certain functions:</p>
<div class="sourceCode" id="cb135"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">2</span><span class="op">^</span><span class="va">data</span></span></code></pre></div>
<pre><code>[1]  8 64 64  4 16  2 32</code></pre>
<div class="sourceCode" id="cb137"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># log(10) with various bases; note the Inf due to base 1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="fl">10</span>, base <span class="op">=</span> <span class="va">data</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 2.095903 1.285097 1.285097 3.321928 1.660964      Inf 1.430677</code></pre>
<p>We can combine these with summary functions to do some neat things. For example, suppose we want to manually calculate the <a href="https://www.mathsisfun.com/data/standard-deviation.html">standard deviation</a>—i.e. the average deviation from the mean—of the sample. Again, we will discuss this in more detail later in the course, but for now here is the formula:</p>
<p><span class="math display">\[SD = \sqrt{\frac1{n-1}\sum_{i=1}^n(x_i-\bar x)^2}\qquad\text{where $\bar{x}=\frac1n\sum_{i=1}^nx_i$}\]</span></p>
<p>In other words, the standard deviation is the square root of 1/(n-1) times the sum of the squared differences between the sample mean and each <code>data</code> value. This is very easy to do with vector arithmetic in R:</p>
<div class="sourceCode" id="cb139"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># implementing sd() using vector arithmetic syntax</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="va">n</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">(</span><span class="va">data</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 1.9518</code></pre>
<p>Let’s break this down. On the inside, <code>data - mean(data)</code> subtracts the mean from each data value one at a time:</p>
<div class="sourceCode" id="cb141"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] -0.8571429  2.1428571  2.1428571 -1.8571429  0.1428571 -2.8571429  1.1428571</code></pre>
<p>This is then squared <code>( ... )^2</code> and again, this operates one at a time:</p>
<div class="sourceCode" id="cb143"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">data</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span></span></code></pre></div>
<pre><code>[1] 0.73469388 4.59183673 4.59183673 3.44897959 0.02040816 8.16326531 1.30612245</code></pre>
<p>Finally, this vector is summed, scaled by 1/(n-1), and square rooted to get the standard deviation. We can check this is correct by comparing with the built-in <code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code> function.</p>
<div class="sourceCode" id="cb145"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 1.9518</code></pre>
</div>
<div id="logical-vectors" class="section level2" number="3.3">
<h2>
<span class="header-section-number">3.3</span> Logical vectors<a class="anchor" aria-label="anchor" href="#logical-vectors"><i class="fas fa-link"></i></a>
</h2>
<p>These <a href="https://osu-codeclub.github.io/posts/basics_04">“vectorized”</a> operations also work with logical comparisons, and these produce <strong>logical vectors</strong>. For example, we can ask R which observations are even:</p>
<div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># recall %% gives the division remainder</span></span>
<span><span class="va">data</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html">%%</a></span> <span class="fl">2</span> <span class="op">==</span> <span class="fl">0</span></span></code></pre></div>
<pre><code>[1] FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE</code></pre>
<p>Or we can ask which of our values are within 1 standard deviation of the mean:</p>
<div class="sourceCode" id="cb149"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># recall &amp; is the AND operator</span></span>
<span><span class="co"># note the inequality checks EACH value of data against the other side</span></span>
<span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="va">data</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">data</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1]  TRUE FALSE FALSE  TRUE  TRUE FALSE  TRUE</code></pre>
<p>Remember from section <a href="rstudio-intro.html#r-specials">2.3.4</a> how any <strong>math turns <code>TRUE</code> into 1 and <code>FALSE</code> into 0</strong>? This turns out to be extremely useful. For example, we can use <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> to count how many values are even:</p>
<div class="sourceCode" id="cb151"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># sum(logical vector) counts the number of TRUEs</span></span>
<span><span class="co"># here, we find 4 data values are even</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">data</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html">%%</a></span> <span class="fl">2</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 4</code></pre>
<p>Or we can ask what <em>proportion</em> of our data is within 1 standard deviation of the mean, which involves taking the sum of a logical comparison and dividing by the length, i.e. computing the mean:</p>
<div class="sourceCode" id="cb153"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># mean(logical vector) = sum(logical vector) / length(logical vector)</span></span>
<span><span class="co"># thus, it's a shortcut for calculating proportion of TRUEs</span></span>
<span><span class="co"># here, we find 57% of the data is within 1 sd of the mean</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span></span>
<span>  <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="va">data</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">data</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 0.5714286</code></pre>
<div class="tip">
<p>Remember: whenever you have a vector of <code>TRUE</code>/<code>FALSE</code> values—usually as a result of some logical comparison—you can use <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> to count how many are <code>TRUE</code>, or <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> to compute the proportion of <code>TRUE</code> values. You can of course also use these in other numeric operations, just remember <code>TRUE</code><span class="math inline">\(\rightarrow1\)</span>, <code>FALSE</code><span class="math inline">\(\rightarrow0\)</span>.</p>
</div>
</div>
<div id="other-constructors" class="section level2" number="3.4">
<h2>
<span class="header-section-number">3.4</span> Other constructors<a class="anchor" aria-label="anchor" href="#other-constructors"><i class="fas fa-link"></i></a>
</h2>
<p>So far, we’ve only learned how to construct vectors by using the <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> function, for example <code>data&lt;-c(3,6,6,2,4,1,5)</code>. There are a few other common ways to construct them.</p>
<p>One of the easiest, if you just need a sequence of integers, is to use the <code>:</code> operator:</p>
<div class="sourceCode" id="cb155"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span></code></pre></div>
<pre><code>[1] 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb157"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">10</span><span class="op">:</span><span class="op">-</span><span class="fl">10</span></span></code></pre></div>
<pre><code> [1]  10   9   8   7   6   5   4   3   2   1   0  -1  -2  -3  -4  -5  -6  -7  -8  -9
[21] -10</code></pre>
<p>The <code><a href="https://rdrr.io/r/base/seq.html">seq()</a></code> function does something similar, except it also has additional arguments <code>by</code> to specify the step size and <code>length.out</code> which specifies how many numbers to have in total (note: only ONE of these arguments can be set at a time).</p>
<div class="sourceCode" id="cb159"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb161"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, by <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code> [1]   0  10  20  30  40  50  60  70  80  90 100</code></pre>
<div class="sourceCode" id="cb163"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, length.out <span class="op">=</span> <span class="fl">101</span><span class="op">)</span></span></code></pre></div>
<pre><code>  [1] 0.00 0.01 0.02 0.03 0.04 0.05 0.06 0.07 0.08 0.09 0.10 0.11 0.12 0.13 0.14 0.15
 [17] 0.16 0.17 0.18 0.19 0.20 0.21 0.22 0.23 0.24 0.25 0.26 0.27 0.28 0.29 0.30 0.31
 [33] 0.32 0.33 0.34 0.35 0.36 0.37 0.38 0.39 0.40 0.41 0.42 0.43 0.44 0.45 0.46 0.47
 [49] 0.48 0.49 0.50 0.51 0.52 0.53 0.54 0.55 0.56 0.57 0.58 0.59 0.60 0.61 0.62 0.63
 [65] 0.64 0.65 0.66 0.67 0.68 0.69 0.70 0.71 0.72 0.73 0.74 0.75 0.76 0.77 0.78 0.79
 [81] 0.80 0.81 0.82 0.83 0.84 0.85 0.86 0.87 0.88 0.89 0.90 0.91 0.92 0.93 0.94 0.95
 [97] 0.96 0.97 0.98 0.99 1.00</code></pre>
<p>Vectors can also be created with the <code><a href="https://rdrr.io/r/base/rep.html">rep()</a></code> function which lets you repeat the contents. There are two arguments: <code>times</code> which controls how many times to repeat the entire input, and <code>each</code> which controls how many times to repeat each element if the input is a vector. You can specify either or both of these arguments.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;&lt;code&gt;rep()&lt;/code&gt; is actually simultaneously an extremely useful and also extremely infuriating function, due to the bafflingly nonintuitive design of its arguments. See Hadley Wickham’s &lt;a href="https://design.tidyverse.org/cs-rep.html"&gt;thoughtful diatribe&lt;/a&gt; on the matter for more.&lt;/p&gt;'><sup>16</sup></a> Note <code><a href="https://rdrr.io/r/base/rep.html">rep()</a></code> can be used to repeat other objects too, not just numbers.</p>
<div class="sourceCode" id="cb165"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># repeat a single number</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 2 2 2 2 2</code></pre>
<div class="sourceCode" id="cb167"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># repeat a vector, specifying both times and each</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, times <span class="op">=</span> <span class="fl">3</span>, each <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<pre><code> [1] 1 1 1 1 2 2 2 2 3 3 3 3 1 1 1 1 2 2 2 2 3 3 3 3 1 1 1 1 2 2 2 2 3 3 3 3</code></pre>
<div class="sourceCode" id="cb169"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># you can also let times be a vector, as well as repeat other objects</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>, times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1]  TRUE  TRUE FALSE FALSE FALSE FALSE</code></pre>
<p>Finally, you can mix and match all these constructors, using a combination of <code><a href="https://rdrr.io/r/base/c.html">c()</a></code>, <code>:</code>, <code><a href="https://rdrr.io/r/base/seq.html">seq()</a></code>, and <code><a href="https://rdrr.io/r/base/rep.html">rep()</a></code> to your heart’s content.</p>
<div class="sourceCode" id="cb171"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">7</span><span class="op">:</span><span class="fl">9</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">12</span>, by <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<pre><code> [1]  1.0  1.0  3.0  3.0  7.0  7.0  8.0  8.0  9.0  9.0 10.0 10.0 10.5 10.5 11.0 11.0
[17] 11.5 11.5 12.0 12.0</code></pre>
</div>
<div id="multiple-vectors-vector-recycling" class="section level2" number="3.5">
<h2>
<span class="header-section-number">3.5</span> Multiple vectors + vector recycling<a class="anchor" aria-label="anchor" href="#multiple-vectors-vector-recycling"><i class="fas fa-link"></i></a>
</h2>
<p>It may not surprise you to learn all these vectorized operations also work on multiple vectors! If the vectors aren’t the same length, <strong>the shorter vectors will be repeated</strong> until they match the length of the longest vector. This is called <a href="https://www.geeksforgeeks.org/vector-recycling-in-r"><strong>recycling</strong></a>. Example:</p>
<div class="sourceCode" id="cb173"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># define some vectors for demo</span></span>
<span><span class="co"># x1, x2 are both length 6 vectors</span></span>
<span><span class="co"># y and z have lengths 3 and 2</span></span>
<span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">:</span><span class="fl">5</span>         <span class="co"># x1:  0, 1, 2, 3, 4, 5</span></span>
<span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span>        <span class="co"># x2: -2,-1, 0, 1, 2, 3</span></span>
<span><span class="va">y</span>  <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>         <span class="co">#  y:  1, 2, 3</span></span>
<span><span class="va">z</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>    <span class="co">#  z: -1, 1</span></span></code></pre></div>
<div class="sourceCode" id="cb174"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># sum vectors one element at a time</span></span>
<span><span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span></span></code></pre></div>
<pre><code>[1] -2  0  2  4  6  8</code></pre>
<div class="sourceCode" id="cb176"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># take powers, again one element at a time from each vector</span></span>
<span><span class="va">x2</span><span class="op">^</span><span class="va">x1</span></span></code></pre></div>
<pre><code>[1]   1  -1   0   1  16 243</code></pre>
<div class="sourceCode" id="cb178"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># take differences, one element at a time, recycling y</span></span>
<span><span class="va">x1</span> <span class="op">-</span> <span class="va">y</span></span></code></pre></div>
<pre><code>[1] -1 -1 -1  2  2  2</code></pre>
<div class="sourceCode" id="cb180"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># log y with x1+2 as base, again recycling y</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">y</span>, base <span class="op">=</span> <span class="va">x1</span> <span class="op">+</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 0.0000000 0.6309298 0.7924813 0.0000000 0.3868528 0.5645750</code></pre>
<div class="sourceCode" id="cb182"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># more complex operation that recycles multiple vectors,</span></span>
<span><span class="co"># as well as some numbers (which are just length 1 vectors)</span></span>
<span><span class="fl">2</span><span class="op">^</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">x1</span> <span class="op">*</span> <span class="va">z</span><span class="op">)</span> <span class="op">-</span> <span class="va">x2</span><span class="op">^</span><span class="va">y</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] -1 -3  0  3  8  1</code></pre>
<div class="sourceCode" id="cb184"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># these also work with other numeric/logical functions we've seen so far</span></span>
<span><span class="co"># here, left side is a length 6 vector, right side is a length 2 vector,</span></span>
<span><span class="co"># so right side is recycled three times then compared with left</span></span>
<span><span class="va">x2</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html">atan</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1]  TRUE  TRUE FALSE  TRUE FALSE FALSE</code></pre>
<div class="note">
<p>In this class, <strong>you should <em>never</em> need a for loop</strong> for any exercises (hence why it’s considered a bonus topic and not covered in the notes but instead left as optional additional reading).</p>
<p>Instead, <strong><em>always</em> look for a solution using vectorized operations</strong>. In R, vectorized operations are basically always <a href="https://datakuity.com/2018/01/17/for-loop-vs-vectorization-in-r">MUCH faster than for loops</a>, due to low-level parallelization optimizations.</p>
</div>
</div>
<div id="in-membership" class="section level2" number="3.6">
<h2>
<span class="header-section-number">3.6</span> <code>%in%</code> (Membership)<a class="anchor" aria-label="anchor" href="#in-membership"><i class="fas fa-link"></i></a>
</h2>
<p>One notable exception to all this is the <a href="https://rdrr.io/r/base/match.html"><code class="sourceCode r"><span class="sc">%in%</span></code></a> operator, which only “vectorizes” on the left side. For example, suppose we want to know which elements of <code>z</code> are in <code>x1</code>. Here’s how:</p>
<div class="sourceCode" id="cb186"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">x1</span></span></code></pre></div>
<pre><code>[1] FALSE  TRUE</code></pre>
<p>If you want to ask which elements of <code>z</code> are NOT in <code>x1</code>, you must prepend the expression with <code>!</code> to negate it:</p>
<div class="sourceCode" id="cb188"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">!</span><span class="va">z</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">x1</span></span></code></pre></div>
<pre><code>[1]  TRUE FALSE</code></pre>
<p>Note the difference between this and <code>z == x1</code>, which recycles <code>z</code>, <em>then</em> checks element-wise equality:</p>
<div class="sourceCode" id="cb190"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z</span> <span class="op">==</span> <span class="va">x1</span></span></code></pre></div>
<pre><code>[1] FALSE  TRUE FALSE FALSE FALSE FALSE</code></pre>
<p>This is another common point of confusion for first time R users. Make sure you understand the <strong>difference between checking vector membership</strong>, i.e. if each element of one vector is also contained <em>somewhere</em> in another vector, <strong>vs checking element-by-element equality</strong>, i.e. checking if the 1<sup>st</sup> elements are the same, and the 2<sup>nd</sup> elements are the same, and the 3<sup>rd</sup> elements are the same, etc. (possibly with recycling). See <a href="https://stackoverflow.com/a/42637186/25278020">this StackOverflow page</a> for more examples.</p>
<div class="note">
<p>Going forward, we will continue to use vectorized functions and vector recycling in code examples, sometimes without drawing attention to it, for sake of brevity. Pretty soon, these concepts should also feel like second nature to you!</p>
</div>
</div>
<div id="vector-subsetting" class="section level2" number="3.7">
<h2>
<span class="header-section-number">3.7</span> Vector subsetting<a class="anchor" aria-label="anchor" href="#vector-subsetting"><i class="fas fa-link"></i></a>
</h2>
<p>Let’s also quickly cover vector subsetting. In R, there are many ways to extract a subset (i.e. just a portion) of a vector. There are 2 important things to remember throughout R when subsetting objects:</p>
<ol style="list-style-type: decimal">
<li>
<strong>R indexes from 1, not 0</strong>. In other words, R starts counting the position of objects from 1.</li>
<li>
<strong>Bounds are inclusive</strong>. In other words, R generally includes both start and end bounds when subsetting.</li>
</ol>
<p>Knowing this, let’s learn subsetting with some examples. A pair of useful built-in objects are the vectors <a href="https://rdrr.io/r/base/Constants.html"><code class="sourceCode r">letters</code></a> and <a href="https://rdrr.io/r/base/Constants.html"><code class="sourceCode r">LETTERS</code></a>, which contain respectively the 26 lowercase and uppercase letters of the English alphabet. These letters make up a character vector (which we will discuss in detail in the next section).</p>
<div class="sourceCode" id="cb192"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">letters</span></span></code></pre></div>
<pre><code> [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s" "t"
[21] "u" "v" "w" "x" "y" "z"</code></pre>
<p>You can extract elements from a vector with the <code>[]</code> operator, giving either a vector of numeric positions, a vector of <code>TRUE</code>/<code>FALSE</code> values, or a negative vector for exclusions (i.e. anything <em>except</em>). Examples:</p>
<div class="sourceCode" id="cb194"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># giving numeric positions of desired elements</span></span>
<span><span class="co"># remember numbers are numeric vectors of length 1</span></span>
<span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></code></pre></div>
<pre><code>[1] "a"</code></pre>
<div class="sourceCode" id="cb196"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># of course this also works with longer vectors</span></span>
<span><span class="va">letters</span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></code></pre></div>
<pre><code>[1] "e" "f" "g" "h" "i" "j"</code></pre>
<div class="sourceCode" id="cb198"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># naturally you can use more complex syntax if needed,</span></span>
<span><span class="co"># as long as the result is a numeric vector,</span></span>
<span><span class="co"># repeating indices give duplicate values</span></span>
<span><span class="va">letters</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">24</span><span class="op">:</span><span class="fl">26</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code> [1] "a" "x" "y" "z" "e" "e" "e" "e" "e" "e" "e" "e"</code></pre>
<div class="sourceCode" id="cb200"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># you can also use a logical vector, here we check if</span></span>
<span><span class="co"># each position is even, returning every second letter</span></span>
<span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">26</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html">%%</a></span> <span class="fl">2</span> <span class="op">==</span> <span class="fl">0</span><span class="op">]</span></span></code></pre></div>
<pre><code> [1] "b" "d" "f" "h" "j" "l" "n" "p" "r" "t" "v" "x" "z"</code></pre>
<div class="sourceCode" id="cb202"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># logical vectors will be recycled if necessary, so this also works</span></span>
<span><span class="va">letters</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code> [1] "b" "d" "f" "h" "j" "l" "n" "p" "r" "t" "v" "x" "z"</code></pre>
<div class="sourceCode" id="cb204"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># using negative vectors is like saying "anything EXCEPT"</span></span>
<span><span class="va">letters</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span></code></pre></div>
<pre><code> [1] "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s" "t" "u"
[21] "v" "w" "x" "y" "z"</code></pre>
<div class="sourceCode" id="cb206"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># again, this also works with vectors of negatives</span></span>
<span><span class="va">letters</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="op">-</span><span class="fl">10</span><span class="op">]</span></span></code></pre></div>
<pre><code> [1] "k" "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v" "w" "x" "y" "z"</code></pre>
<div class="sourceCode" id="cb208"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># of course this is equivalent to</span></span>
<span><span class="va">letters</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code> [1] "k" "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v" "w" "x" "y" "z"</code></pre>
<div class="sourceCode" id="cb210"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># note the parentheses there, without it you get -1,0,1,...,10</span></span>
<span><span class="co"># which raises an error (what we want is -1,-2,...,-10)</span></span>
<span><span class="co"># this is because positive and negative position syntax cannot be mixed</span></span>
<span><span class="va">letters</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></code></pre></div>
<pre><code>Error in letters[-1:10] : only 0's may be mixed with negative subscripts</code></pre>
</div>
<div id="sortingreordering" class="section level2" number="3.8">
<h2>
<span class="header-section-number">3.8</span> Sorting/reordering<a class="anchor" aria-label="anchor" href="#sortingreordering"><i class="fas fa-link"></i></a>
</h2>
<p>Sometimes, you may need to sort/reorder vectors. We already saw in the previous section you can reorder vectors by subsetting with a vector of positions. If the vector of positions exhausts the vector without repeating (i.e. returns each element of the vector exactly once), the result is a reordering of the vector.</p>
<div class="sourceCode" id="cb212"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># defining a new data2 vector to use for examples,</span></span>
<span><span class="co"># trust me, this will REALLY help clarify what's happening in a minute</span></span>
<span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">*</span> <span class="fl">10</span></span>
<span><span class="va">data2</span></span></code></pre></div>
<pre><code>[1] 30 60 60 20 40 10 50</code></pre>
<div class="sourceCode" id="cb214"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ok, now let's proceed with the demos, first up:</span></span>
<span><span class="co"># manual reordering, e.g. swapping the first and last elements</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">data2</span><span class="op">)</span></span>
<span><span class="va">data2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">2</span><span class="op">:</span><span class="op">(</span><span class="va">n</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code>[1] 50 60 60 20 40 10 30</code></pre>
<p>You can of course also have R sort a vector for you. There are two main functions for sorting: <code><a href="https://rdrr.io/r/base/sort.html">sort()</a></code>, which does what you expect and returns a vector with the elements rearranged from lowest to highest (unless you set the argument <code>decreasing = TRUE</code> which does the opposite); and <code><a href="https://rdrr.io/r/base/order.html">order()</a></code>, which simply returns the order the elements would go in (i.e. a vector of positions where they belong) if they were to be sorted lowest to highest (again, unless you set <code>decreasing = TRUE</code>).</p>
<div class="sourceCode" id="cb216"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># simply sort the data in ascending order</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">data2</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 10 20 30 40 50 60 60</code></pre>
<div class="sourceCode" id="cb218"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># sort in descending order</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">data2</span>, decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 60 60 50 40 30 20 10</code></pre>
<div class="sourceCode" id="cb220"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># return the order of positions that WOULD sort it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">data2</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 6 4 1 5 7 2 3</code></pre>
<div class="sourceCode" id="cb222"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># passing this as a subsetting vector gives the sorted vector</span></span>
<span><span class="va">data2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">data2</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code>[1] 10 20 30 40 50 60 60</code></pre>
<p>A final function that is sometimes handy is the <code><a href="https://rdrr.io/r/base/rev.html">rev()</a></code> function, which reverses the vector.</p>
<div class="sourceCode" id="cb224"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># reverse the vector</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="va">data2</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 50 10 40 20 60 60 30</code></pre>
<div class="note">
<p>In general, <strong>most R operations do NOT change the input object in place</strong>. E.g. <code>sort(data2)</code> returns a COPY of <code>data2</code> with the elements sorted; it does NOT actually change <code>data2</code>. This is true for most functions in R, with few exceptions. For example, observe:</p>
<div class="sourceCode" id="cb226"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># original data2 vector</span></span>
<span><span class="va">data2</span></span></code></pre></div>
<pre><code>[1] 30 60 60 20 40 10 50</code></pre>
<div class="sourceCode" id="cb228"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># sort data2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">data2</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 10 20 30 40 50 60 60</code></pre>
<div class="sourceCode" id="cb230"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># is it changed?</span></span>
<span><span class="va">data2</span></span></code></pre></div>
<pre><code>[1] 30 60 60 20 40 10 50</code></pre>
<p>If you want an object to be updated in place, you should explicitly tell R to overwrite it again with the assignment <code>&lt;-</code> operator, like this:</p>
<div class="sourceCode" id="cb232"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># overwrite data2 with the sorted copy (discouraged syntax)</span></span>
<span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">data2</span><span class="op">)</span></span>
<span><span class="co"># now it's changed</span></span>
<span><span class="va">data2</span></span></code></pre></div>
<pre><code>[1] 10 20 30 40 50 60 60</code></pre>
<p>It’s often considered bad practice to overwrite input like this, since it can be destructive and, if not used with caution, can more easily lead to errors down the road. <strong>We recommend whenever possible writing the output to a new object instead</strong>, like this:</p>
<div class="sourceCode" id="cb234"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># save sorted data2 to new object (encouraged syntax)</span></span>
<span><span class="va">data2_sorted</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">data2</span><span class="op">)</span></span>
<span><span class="va">data2_sorted</span></span></code></pre></div>
<pre><code>[1] 10 20 30 40 50 60 60</code></pre>
<p>In general, R inputs and outputs are totally independent objects with no special “connections”.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Put another way, R passes by value not reference, and copies are usually deep not shallow. Yes this can be very inefficient, but it’s also arguably more user-friendly and intuitive to less technical users, which is by design.&lt;/p&gt;"><sup>17</sup></a>. If you want an operation to be saved, <strong>make sure to remember to assign the output to something!</strong></p>
</div>
</div>
<div id="character-vectors" class="section level2" number="3.9">
<h2>
<span class="header-section-number">3.9</span> Character vectors<a class="anchor" aria-label="anchor" href="#character-vectors"><i class="fas fa-link"></i></a>
</h2>
<p>The <a href="https://rdrr.io/r/base/Constants.html"><code class="sourceCode r">letters</code></a> vector in the last section was one example of a <strong>character vector</strong>. You can create a character vector also with <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> or <code><a href="https://rdrr.io/r/base/rep.html">rep()</a></code> which we’ve seen before. When creating characters, you can use either the single <span class="k"><code>'</code></span> or double <span class="k"><code>"</code></span> quote character, no difference.</p>
<div class="sourceCode" id="cb236"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># creating a demo character vector, e.g. these are my friends!</span></span>
<span><span class="va">friends</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Alice"</span>, <span class="st">"Bob"</span>, <span class="st">"Charlie"</span>, <span class="st">"Donny"</span>, <span class="st">"Emmy"</span>,</span>
<span>             <span class="st">"Francine"</span>, <span class="st">"Genevieve"</span>, <span class="st">"Heinemann"</span><span class="op">)</span></span>
<span><span class="va">friends</span></span></code></pre></div>
<pre><code>[1] "Alice"     "Bob"       "Charlie"   "Donny"     "Emmy"      "Francine" 
[7] "Genevieve" "Heinemann"</code></pre>
<div class="sourceCode" id="cb238"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># you can also use rep, e.g. I can assign my friends into 2 groups</span></span>
<span><span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, time <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">groups</span></span></code></pre></div>
<pre><code>[1] "A" "B" "A" "B" "A" "B" "A" "B"</code></pre>
<div id="basic-string-functions" class="section level3" number="3.9.1">
<h3>
<span class="header-section-number">3.9.1</span> Basic string functions<a class="anchor" aria-label="anchor" href="#basic-string-functions"><i class="fas fa-link"></i></a>
</h3>
<p>Base R has a number of common functions for working with strings: <code><a href="https://rdrr.io/r/base/nchar.html">nchar()</a></code> for getting the number of characters, <code><a href="https://rdrr.io/r/base/chartr.html">tolower()</a></code>/<code><a href="https://rdrr.io/r/base/chartr.html">toupper()</a></code> to convert case, <code><a href="https://rdrr.io/r/base/substr.html">substr()</a></code> for extracting substrings, <code><a href="https://rdrr.io/r/base/paste.html">paste()</a></code>/<code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code> to concatenate (e.g. “glue” together) strings, and <code><a href="https://rdrr.io/r/base/strrep.html">strrep()</a></code> for repeating the characters in a string.</p>
<div class="sourceCode" id="cb240"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get the number of characters in each name</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">friends</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 5 3 7 5 4 8 9 9</code></pre>
<div class="sourceCode" id="cb242"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># convert names to all upper or all lower</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html">toupper</a></span><span class="op">(</span><span class="va">friends</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "ALICE"     "BOB"       "CHARLIE"   "DONNY"     "EMMY"      "FRANCINE" 
[7] "GENEVIEVE" "HEINEMANN"</code></pre>
<div class="sourceCode" id="cb244"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span><span class="op">(</span><span class="va">friends</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "alice"     "bob"       "charlie"   "donny"     "emmy"      "francine" 
[7] "genevieve" "heinemann"</code></pre>
<div class="sourceCode" id="cb246"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get the first 3 characters of each name</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">friends</span>, <span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "Ali" "Bob" "Cha" "Don" "Emm" "Fra" "Gen" "Hei"</code></pre>
<div class="sourceCode" id="cb248"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get the last 3 characters of each name;</span></span>
<span><span class="co"># remember R always includes bounds, so to get the last three,</span></span>
<span><span class="co"># we want to get n-2,n-1,n where n is the number of characters</span></span>
<span><span class="co"># note this is done once again with our old friend, vectorization!</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">friends</span>, <span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">friends</span><span class="op">)</span> <span class="op">-</span> <span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">friends</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "ice" "Bob" "lie" "nny" "mmy" "ine" "eve" "ann"</code></pre>
<div class="sourceCode" id="cb250"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># remove the first and last characters of each name</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">friends</span>, <span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">friends</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "lic"     "o"       "harli"   "onn"     "mm"      "rancin"  "eneviev" "eineman"</code></pre>
<div class="sourceCode" id="cb252"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># paste can "glue" on single or (recycled) vectors of strings</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">friends</span>, <span class="st">"is my friend"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "Alice is my friend"     "Bob is my friend"       "Charlie is my friend"  
[4] "Donny is my friend"     "Emmy is my friend"      "Francine is my friend" 
[7] "Genevieve is my friend" "Heinemann is my friend"</code></pre>
<div class="sourceCode" id="cb254"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"My friend"</span>, <span class="va">friends</span>, <span class="st">"is in group"</span>, <span class="va">groups</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "My friend Alice is in group A"     "My friend Bob is in group B"      
[3] "My friend Charlie is in group A"   "My friend Donny is in group B"    
[5] "My friend Emmy is in group A"      "My friend Francine is in group B" 
[7] "My friend Genevieve is in group A" "My friend Heinemann is in group B"</code></pre>
<div class="sourceCode" id="cb256"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># paste0(...) is a shortcut for paste(..., sep="")</span></span>
<span><span class="co"># sep sets the separator between each string (default: a space " ")</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">friends</span>, <span class="st">"123"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "Alice123"     "Bob123"       "Charlie123"   "Donny123"     "Emmy123"     
[6] "Francine123"  "Genevieve123" "Heinemann123"</code></pre>
<div class="sourceCode" id="cb258"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">friends</span>, <span class="st">"123"</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "Alice_123"     "Bob_123"       "Charlie_123"   "Donny_123"     "Emmy_123"     
[6] "Francine_123"  "Genevieve_123" "Heinemann_123"</code></pre>
<div class="sourceCode" id="cb260"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># paste also has an argument called collapse, which sets a separator,</span></span>
<span><span class="co"># then uses that separator to collapse the vector into a single string</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">friends</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "Alice, Bob, Charlie, Donny, Emmy, Francine, Genevieve, Heinemann"</code></pre>
<div class="sourceCode" id="cb262"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># repeat characters in each string a set number of times</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/strrep.html">strrep</a></span><span class="op">(</span><span class="va">friends</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "AliceAliceAlice"             "BobBobBob"                  
[3] "CharlieCharlieCharlie"       "DonnyDonnyDonny"            
[5] "EmmyEmmyEmmy"                "FrancineFrancineFrancine"   
[7] "GenevieveGenevieveGenevieve" "HeinemannHeinemannHeinemann"</code></pre>
<div class="sourceCode" id="cb264"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># of course, this can also be vectorized!</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/strrep.html">strrep</a></span><span class="op">(</span><span class="va">friends</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "Alice"                                                                   
[2] "BobBob"                                                                  
[3] "CharlieCharlieCharlie"                                                   
[4] "DonnyDonnyDonnyDonny"                                                    
[5] "EmmyEmmyEmmyEmmyEmmy"                                                    
[6] "FrancineFrancineFrancineFrancineFrancineFrancine"                        
[7] "GenevieveGenevieveGenevieveGenevieveGenevieveGenevieveGenevieve"         
[8] "HeinemannHeinemannHeinemannHeinemannHeinemannHeinemannHeinemannHeinemann"</code></pre>
</div>
<div id="pattern-string-functions" class="section level3" number="3.9.2">
<h3>
<span class="header-section-number">3.9.2</span> Pattern string functions<a class="anchor" aria-label="anchor" href="#pattern-string-functions"><i class="fas fa-link"></i></a>
</h3>
<p>There are also functions for working with patterns. You don’t need to master these functions, but a few basic demos of them may prove helpful. Primarily, we have <code><a href="https://rdrr.io/r/base/grep.html">grep()</a></code>/<code><a href="https://rdrr.io/r/base/grep.html">grepl()</a></code> for pattern matching, and <code><a href="https://rdrr.io/r/base/grep.html">sub()</a></code>/<code><a href="https://rdrr.io/r/base/grep.html">gsub()</a></code> for pattern replacing. The prefix/suffix matching <code><a href="https://rdrr.io/r/base/startsWith.html">startsWith()</a></code>/<code><a href="https://rdrr.io/r/base/startsWith.html">endsWith()</a></code> are also occasionally useful.</p>
<p>It should be noted the patterns below are all fairly short (mostly one single character) for simplicity of example, but patterns can be as many characters long as necessary.</p>
<div class="sourceCode" id="cb266"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># which friends (by position) have a lowercase "e" in their name?</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"e"</span>, <span class="va">friends</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 1 3 6 7 8</code></pre>
<div class="sourceCode" id="cb268"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># alternatively, return a TRUE/FALSE vector result instead for each element</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"e"</span>, <span class="va">friends</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1]  TRUE FALSE  TRUE FALSE FALSE  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb270"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># you can use either one to subset the original vector to get actual names</span></span>
<span><span class="va">friends</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"e"</span>, <span class="va">friends</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code>[1] "Alice"     "Charlie"   "Francine"  "Genevieve" "Heinemann"</code></pre>
<div class="sourceCode" id="cb272"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># you can disable case sensitivity, which adds Emmy to the results</span></span>
<span><span class="va">friends</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"e"</span>, <span class="va">friends</span>, ignore.case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code>[1] "Alice"     "Charlie"   "Emmy"      "Francine"  "Genevieve" "Heinemann"</code></pre>
<div class="sourceCode" id="cb274"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># you can use sub() to replace patterns</span></span>
<span><span class="co"># here we can create a set of variant spellings, changing -y to -ie</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">sub</a></span><span class="op">(</span><span class="st">"y"</span>, <span class="st">"ie"</span>, <span class="va">friends</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "Alice"     "Bob"       "Charlie"   "Donnie"    "Emmie"     "Francine" 
[7] "Genevieve" "Heinemann"</code></pre>
<div class="sourceCode" id="cb276"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># sub() can only replace once (inside each element),</span></span>
<span><span class="co"># but gsub() can replace ALL occurrences</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">sub</a></span><span class="op">(</span><span class="st">"n"</span>, <span class="st">"m"</span>, <span class="va">friends</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "Alice"     "Bob"       "Charlie"   "Domny"     "Emmy"      "Framcine" 
[7] "Gemevieve" "Heimemann"</code></pre>
<div class="sourceCode" id="cb278"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"n"</span>, <span class="st">"m"</span>, <span class="va">friends</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "Alice"     "Bob"       "Charlie"   "Dommy"     "Emmy"      "Framcime" 
[7] "Gemevieve" "Heimemamm"</code></pre>
<div class="sourceCode" id="cb280"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># which friends have a name that endsWith() "y"?</span></span>
<span><span class="co"># (startsWith() does the opposite)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/startsWith.html">endsWith</a></span><span class="op">(</span><span class="va">friends</span>, <span class="st">"y"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE</code></pre>
<p>Each of these functions (as well as several more listed in the <code><a href="https://rdrr.io/r/base/grep.html">grep()</a></code> help page), actually accept more complex pattern syntax for the search pattern. This advanced search pattern syntax is called “regular expressions” or “regex” for short. You can do things like match groups of characters, match repeated characters or groups, match to specific locations in words or sentences, and more.</p>
<p>In this class we will NOT cover regular expressions to any real detail again due to limited time, but feel free to explore <a href="misc/r-regular-expression-cheetsheat.pdf">this cheat sheet</a> as well as <a href="https://paulvanderlaken.com/2017/10/03/regular-expressions-in-r-part-1-introduction-and-base-r-functions">these</a> <a href="https://bookdown.org/rdpeng/rprogdatascience/regular-expressions.html">two</a> additional articles on the matter.</p>
<!--original:
https://paulvanderlaken.com/wp-content/uploads/2017/08/r-regular-expression-cheetsheat.pdf
-->
</div>
<div id="additional-stringr-functions" class="section level3" number="3.9.3">
<h3>
<span class="header-section-number">3.9.3</span> Additional stringr functions<a class="anchor" aria-label="anchor" href="#additional-stringr-functions"><i class="fas fa-link"></i></a>
</h3>
<p><a href="https://stringr.tidyverse.org">stringr</a>, one of the <a href="https://www.tidyverse.org/packages/#core-tidyverse">core Tidyverse</a> packages, contains an alternative set of functions for working with strings. Many of these are similar in purpose to base R versions (although some have subtle differences). E.g. <code><a href="https://stringr.tidyverse.org/reference/str_length.html">str_length()</a></code> is the same as <code><a href="https://rdrr.io/r/base/nchar.html">nchar()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_lower()</a></code>/<code><a href="https://stringr.tidyverse.org/reference/case.html">str_to_upper()</a></code> replicate <code><a href="https://rdrr.io/r/base/chartr.html">tolower()</a></code>/<code><a href="https://rdrr.io/r/base/chartr.html">toupper()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace()</a></code> is similar to <code><a href="https://rdrr.io/r/base/grep.html">sub()</a></code>, <code><a href="https://stringr.tidyverse.org/reference/str_sub.html">str_sub()</a></code> extends <code><a href="https://rdrr.io/r/base/substr.html">substr()</a></code>, etc. Here’s a full list of these <a href="https://stringr.tidyverse.org/articles/from-base.html">doppelgänger stringr functions</a>.</p>
<p>However, there are a few useful stringr functions that do not have counterparts in base R (or at least whose counterparts require much more complex expressions). Here is a <em>small</em> curation of them.</p>
<div class="sourceCode" id="cb282"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># since stringr is a "core" tidyverse package,</span></span>
<span><span class="co"># you can load it (+other core packages) with library(tidyverse)</span></span>
<span><span class="co"># you can also just load stringr by itself if that's all you need</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org">stringr</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb283"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># count how many times a pattern occurs</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_count.html">str_count</a></span><span class="op">(</span><span class="va">friends</span>, <span class="st">"e"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 1 0 1 0 0 1 4 2</code></pre>
<div class="sourceCode" id="cb285"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># change strings to title case, i.e. first letter uppercase, all else lower</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_title</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/chartr.html">toupper</a></span><span class="op">(</span><span class="va">friends</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "Alice"     "Bob"       "Charlie"   "Donny"     "Emmy"      "Francine" 
[7] "Genevieve" "Heinemann"</code></pre>
<div class="sourceCode" id="cb287"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># "pad" a vector of strings to a constant length</span></span>
<span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_pad.html">str_pad</a></span><span class="op">(</span><span class="va">friends</span>, width <span class="op">=</span> <span class="fl">12</span>, side <span class="op">=</span> <span class="st">"right"</span>, pad <span class="op">=</span> <span class="st">"."</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "Alice......." "Bob........." "Charlie....." "Donny......." "Emmy........"
[6] "Francine...." "Genevieve..." "Heinemann..."</code></pre>
</div>
<div id="comparing-strings" class="section level3" number="3.9.4">
<h3>
<span class="header-section-number">3.9.4</span> Comparing strings<a class="anchor" aria-label="anchor" href="#comparing-strings"><i class="fas fa-link"></i></a>
</h3>
<p>Strings, like numbers, can also be logically compared in R using the same <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code> operators (also all vectorized of course). Checking equality is self-explanatory, and <strong>inequalities evaluate by dictionary sorting order</strong>, i.e. what order they might appear in in a dictionary, except generalized to include not just letters but also number and symbols.</p>
<p>This snippet of code below (which you do NOT have to worry about learning right now) prints the “dictionary” sorting order for all ordinary keyboard characters typable on a standard US English keyboard layout in ascending order.</p>
<div class="sourceCode" id="cb289"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print out the result</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span></span>
<span>  <span class="co"># sort the characters</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span></span>
<span>    <span class="co"># flatten list output to a big vector of characters</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span><span class="op">(</span></span>
<span>      <span class="co"># split symbols into individual characters</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html">strsplit</a></span><span class="op">(</span></span>
<span>        <span class="co"># make a vector of all ordinary keyboard characters</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">letters</span>, <span class="va">LETTERS</span>, <span class="fl">0</span><span class="op">:</span><span class="fl">9</span>, <span class="st">"`~!@#$%^&amp;*()_+-=[]\\{}|;':\",./&lt;&gt;? "</span><span class="op">)</span>,</span>
<span>        <span class="st">""</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre>
'- !"#$%&amp;()*,./:;?@[\]^_`{|}~+&lt;=&gt;0123456789aAbBcCdDeEfFgGhHiIjJkKlLmMnNoOpPqQrRsStTuUvVwWxXyYzZ
</pre>
<div class="note">
<p>This ordering depends on the platform; the above order should be for Windows systems. *nix systems (i.e. Mac/Linux) order by <code> _-,;:!?.’"()[]{}@*/\&amp;#%`^+&lt;=&gt;|~$0123…yYzZ</code> instead.</p>
</div>
<p>Characters are sorted by their order in this sequence of characters, with characters earlier in the sequence being “less than” later characters. Strings with the same first character will be sorted by the second character; if the second character is also the same, they will be sorted by the third, and so on (just like normal dictionaries)</p>
<p>Note however that nothingness, i.e. the absence of a character (such as when a string ends), comes before any character, which makes sense because otherwise “app” would appear after “apple”. Below is a series of examples demonstrating string sorting.</p>
<div class="sourceCode" id="cb290"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"apple"</span> <span class="op">==</span> <span class="st">"apple"</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb292"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># note equality also implies both &gt;= and &lt;=</span></span>
<span><span class="st">"apple"</span> <span class="op">&gt;=</span> <span class="st">"apple"</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb294"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># remember R is case sensitive, so these are different</span></span>
<span><span class="st">"apple"</span> <span class="op">!=</span> <span class="st">"Apple"</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb296"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># comparing apples and oranges</span></span>
<span><span class="st">"apple"</span> <span class="op">==</span> <span class="st">"orange"</span></span></code></pre></div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode" id="cb298"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"apple"</span> <span class="op">&lt;</span> <span class="st">"orange"</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb300"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># numbers and symbols can also dictionary-sort like letters</span></span>
<span><span class="co"># note these numeral characters have NO numeric meaning!</span></span>
<span><span class="st">"42"</span> <span class="op">&lt;</span> <span class="st">"43"</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb302"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"1 pm"</span> <span class="op">&lt;</span> <span class="st">"2 pm"</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb304"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"STAT240"</span> <span class="op">&lt;</span> <span class="st">"STAT340"</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb306"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># however symbols come before numbers, thus</span></span>
<span><span class="st">"1,000"</span> <span class="op">&lt;</span> <span class="st">"1000"</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb308"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"-3.00"</span> <span class="op">&lt;</span> <span class="st">"-3.14"</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb310"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># and remember ending a string comes before any other character</span></span>
<span><span class="st">"-3"</span> <span class="op">&lt;</span> <span class="st">"-3.14"</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<p>Using our newfound wisdom, we can now conclusively settle some age old debates!</p>
<div class="sourceCode" id="cb312"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># what is the greatest state? (head prints the first 6)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">state.name</span>, decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "Wyoming"       "Wisconsin"     "West Virginia" "Washington"    "Virginia"     
[6] "Vermont"      </code></pre>
<div class="sourceCode" id="cb314"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># note by definition of inequalities, we can also use min/max</span></span>
<span><span class="co"># which will find the first and last alphabetically</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">state.name</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">state.name</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "Alabama" "Wyoming"</code></pre>
<div class="sourceCode" id="cb316"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># is the pen mightier than the sword?</span></span>
<span><span class="st">"pen"</span> <span class="op">&gt;</span> <span class="st">"sword"</span></span></code></pre></div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode" id="cb318"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># is Windows better than Mac?</span></span>
<span><span class="st">"Windows"</span> <span class="op">&gt;</span> <span class="st">"Mac"</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb320"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># and most importantly, did the chicken come before the egg?</span></span>
<span><span class="st">"chicken"</span> <span class="op">&lt;</span> <span class="st">"egg"</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
</div>
<div id="ordered-data" class="section level3" number="3.9.5">
<h3>
<span class="header-section-number">3.9.5</span> Bonus: ordered data<a class="anchor" aria-label="anchor" href="#ordered-data"><i class="fas fa-link"></i></a>
</h3>
<p>Ordered categorical data (also called ordinals) is extremely common, so it’s worth briefly mentioning here, even if it’s considered mostly outside the scope of this course. If you have characters where a natural ordering is present, it’s recommended to use <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> to convert it, setting <code>ordered = TRUE</code> and using <code>levels = c(...)</code> to specify the ordering of the levels in ascending order (low to high).</p>
<p>For example, suppose you have the following data vector of dosage level data for some subjects:</p>
<div class="sourceCode" id="cb322"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">doses</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="st">"High"</span>, <span class="st">"Medium"</span>, <span class="st">"Low"</span>, <span class="st">"High"</span><span class="op">)</span></span></code></pre></div>
<p>Naturally, this should be ordered Low &lt; Medium &lt; High but it currently has no ordering structure. We can fix it like this:</p>
<div class="sourceCode" id="cb323"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">doses</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">doses</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="st">"Medium"</span>, <span class="st">"High"</span><span class="op">)</span>, ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">doses</span></span></code></pre></div>
<pre><code>[1] Low    High   Medium Low    High  
Levels: Low &lt; Medium &lt; High</code></pre>
<p>You can see now it has an ordering structure and R understands how the levels compare to each other. This ordering will also be automatically respected in later plots and analysis, as you’ll soon see.</p>
</div>
</div>
<div id="coercion" class="section level2" number="3.10">
<h2>
<span class="header-section-number">3.10</span> Coercion (converting types)<a class="anchor" aria-label="anchor" href="#coercion"><i class="fas fa-link"></i></a>
</h2>
<p>Sometimes, we read data in and it may need to be converted before it’s usable. E.g. let’s say you read in a list of prices from some catalog and you get the following character vector:</p>
<div class="sourceCode" id="cb325"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prices_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"$1,000"</span>, <span class="st">"$1,500"</span>, <span class="st">"$850"</span>, <span class="st">"$2,000"</span><span class="op">)</span></span>
<span><span class="va">prices_raw</span></span></code></pre></div>
<pre><code>[1] "$1,000" "$1,500" "$850"   "$2,000"</code></pre>
<p>Since R doesn’t natively understand dollar signs or comma grouping, this must start as a character vector. You can check the type of a vector by using the <code><a href="https://rdrr.io/r/base/numeric.html">is.numeric()</a></code>, <code><a href="https://rdrr.io/r/base/logical.html">is.logical()</a></code>, <code><a href="https://rdrr.io/r/base/character.html">is.character()</a></code> functions.</p>
<div class="sourceCode" id="cb327"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/character.html">is.character</a></span><span class="op">(</span><span class="va">prices_raw</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<p>If the data has been “cleaned-up” then you can coerce (i.e. convert) the vector into other types with the corresponding <code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code>, <code><a href="https://rdrr.io/r/base/logical.html">as.logical()</a></code>, <code><a href="https://rdrr.io/r/base/character.html">as.character()</a></code> functions. In this case however, the data is not yet “cleaned-up” so this coercion operation will give an error.</p>
<div class="sourceCode" id="cb329"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">prices_raw</span><span class="op">)</span></span></code></pre></div>
<pre class="warning"><code>Warning: NAs introduced by coercion</code></pre>
<pre><code>[1] NA NA NA NA</code></pre>
<p>In R, it’s important to remember <strong>not to reinvent the wheel</strong>; most actions already have an associated package/function, and it’s probably better than what you can write (if you’re a beginner). Here, it may be tempting to write your own parsing function by using <code><a href="https://rdrr.io/r/base/grep.html">sub()</a></code>/<code><a href="https://rdrr.io/r/base/grep.html">gsub()</a></code> to replace the dollar and commas then coerce, but there’s a better option.</p>
<p><a href="https://readr.tidyverse.org/index.html">readr</a> is another one of the <a href="https://www.tidyverse.org/packages/#core-tidyverse">core Tidyverse</a> packages. It’s designed to make ingesting data as easy as possible.</p>
<p>One set of readr functions useful here are the <code><a href="https://readr.tidyverse.org/reference/parse_number.html">parse_number()</a></code> and <code><a href="https://readr.tidyverse.org/reference/parse_atomic.html">parse_logical()</a></code> functions (converting to a string is trivial and can basically always be done using the <code><a href="https://rdrr.io/r/base/character.html">as.character()</a></code> function). These functions are quite smart and can ignore extra characters and just extract the relevant numerical info.</p>
<div class="sourceCode" id="cb332"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># since readr is also a "core" tidyverse package,</span></span>
<span><span class="co"># you can use library(tidyverse) or library(readr)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb333"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">parse_number</a></span><span class="op">(</span><span class="va">prices_raw</span><span class="op">)</span></span>
<span><span class="va">prices</span></span></code></pre></div>
<pre><code>[1] 1000 1500  850 2000</code></pre>
<div class="sourceCode" id="cb335"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">is.numeric</a></span><span class="op">(</span><span class="va">prices</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<p>This will also work with things like percent symbols, but note it simply ignores the symbol instead of treating it as dividing by 100.</p>
<div class="sourceCode" id="cb337"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># demonstrate parsing percentages</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">parse_number</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"30%"</span>, <span class="st">"100%"</span>, <span class="st">"1,500%"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1]   30  100 1500</code></pre>
<p>See the help page for <code><a href="https://readr.tidyverse.org/reference/parse_number.html">parse_number()</a></code> for more examples and usage notes.</p>
</div>
<div id="date-vectors" class="section level2" number="3.11">
<h2>
<span class="header-section-number">3.11</span> Date vectors<a class="anchor" aria-label="anchor" href="#date-vectors"><i class="fas fa-link"></i></a>
</h2>
<p>Finally, let’s talk about date vectors (note we are not talking about date+time values, just dates). In R, dates are actually stored as a number, representing the <a href="https://rdrr.io/r/base/Dates.html">number of days after January 1<sup>st</sup> 1970</a>, which is used as a reference date called the <a href="https://en.wikipedia.org/wiki/Epoch_(computing)">Epoch</a>.</p>
<p>Before we run some examples, we’re going to load in the <a href="https://lubridate.tidyverse.org/">lubridate</a> package, which is designed to make working with dates super easy and is also a core Tidyverse package.</p>
<div class="sourceCode" id="cb339"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org">lubridate</a></span><span class="op">)</span></span></code></pre></div>
<p>Ok, let’s start the demo by creating a date object. Let’s use this year’s 4<sup>th</sup> of July as an example.</p>
<div class="sourceCode" id="cb340"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create example date object (more on this later)</span></span>
<span><span class="va">date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">ymd</a></span><span class="op">(</span><span class="st">"2025-07-04"</span><span class="op">)</span></span>
<span><span class="va">date</span></span></code></pre></div>
<pre><code>[1] "2025-07-04"</code></pre>
<p>We can see that even though our date object has <code>"Date"</code> class, it actually has <code>"double"</code> type, which means behind the scenes, it’s secretly stored as a number.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;The distinction between class, type, and mode (which we haven’t even mentioned and won’t ever discuss) is highly technical to the mechanics of R and not worth concerning yourself over. If you’re dying of curiosity, I recommend this excellent video on the matter: &lt;a href="https://youtu.be/RwEzWZA9uTw" class="uri"&gt;https://youtu.be/RwEzWZA9uTw&lt;/a&gt;.&lt;/p&gt;'><sup>18</sup></a> If you <code><a href="https://rdrr.io/r/base/class.html">unclass()</a></code> the object, i.e. strip away the <code>"Date"</code> property, you can see it’s just the number 20273 underneath, and you can check that in fact Jul 4, 2025 is indeed <a href="https://www.wolframalpha.com/input?i=20273+days+after+Jan+1+1970">20273 days after Jan 1 1970</a>.</p>
<div class="sourceCode" id="cb342"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># looks like a date</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "Date"</code></pre>
<div class="sourceCode" id="cb344"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/date_utils.html">is.Date</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">is.numeric</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb346"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># but it's secretly a number underneath!</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">unclass</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 20273</code></pre>
<div class="sourceCode" id="cb348"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># we can reverse this too, start with a number,</span></span>
<span><span class="co"># then change the class to "Date", and voila!</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">20273</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Date"</span></span>
<span><span class="va">x</span></span></code></pre></div>
<pre><code>[1] "2025-07-04"</code></pre>
<div class="note">
<p>R conforms to <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO-8601</a> standards, i.e. <strong>dates ALWAYS show as <code>"YYYY-MM-DD"</code></strong> (even though they’re stored numerically). This is arguably the best format for dates, because it’s the unique format where <a href="https://en.wikipedia.org/wiki/ISO_8601#General_principles">chronological order and lexicographical order are identical</a>, which is an extremely useful property.</p>
<p>Also note despite <code>date</code> appearing to be a character, it is NOT a character. Using <code><a href="https://rdrr.io/r/base/identical.html">identical()</a></code> (which compares if two objects are the same) will show this to be false. Furthermore, <code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code> confirms <code>date</code> converts to 20273 as expected, whereas the string <code>"2025-07-04"</code> cannot be converted and returns <code>NA</code>.</p>
<div class="sourceCode" id="cb350"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">date</span></span></code></pre></div>
<pre><code>[1] "2025-07-04"</code></pre>
<div class="sourceCode" id="cb352"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/character.html">is.character</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode" id="cb354"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html">identical</a></span><span class="op">(</span><span class="va">date</span>, <span class="st">"2025-07-04"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode" id="cb356"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="st">"2025-07-04"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre class="warning"><code>Warning: NAs introduced by coercion</code></pre>
<pre><code>[1] 20273    NA</code></pre>
<p>This is just to warn you that <strong>even though they may print similarly, date objects and date-like strings are <em>NOT</em> the same</strong>, so to avoid errors and unexpected behavior, make sure you properly convert all date data to be true date objects.</p>
</div>
<div id="parsing-dates" class="section level3" number="3.11.1">
<h3>
<span class="header-section-number">3.11.1</span> Parsing dates<a class="anchor" aria-label="anchor" href="#parsing-dates"><i class="fas fa-link"></i></a>
</h3>
<p>In some cases (specifically, if dates in a dataset are already represented in standard ISO-8601 format) R will automagically parse (i.e. convert) the dates for you. In other cases, you may need to manually parse them yourself. We will continue to use lubridate, since it has the most robust and user-friendly functions for working with dates.</p>
<p>In lubridate, the <a href="https://lubridate.tidyverse.org/reference/ymd.html">parser functions</a> <code><a href="https://lubridate.tidyverse.org/reference/ymd.html">mdy()</a></code>, <code><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy()</a></code>, <code><a href="https://lubridate.tidyverse.org/reference/ymd.html">ymd()</a></code> (as well as their rarer siblings <code><a href="https://lubridate.tidyverse.org/reference/ymd.html">ydm()</a></code>, <code><a href="https://lubridate.tidyverse.org/reference/ymd.html">myd()</a></code>, and <code><a href="https://lubridate.tidyverse.org/reference/ymd.html">dym()</a></code>) are used to parse date data into proper date objects. The <strong>only difference between these functions is the <em>order</em> they expect to see date components</strong>, e.g. <code><a href="https://lubridate.tidyverse.org/reference/ymd.html">mdy()</a></code> is used when the data is ordered month, day, then year (which is common in the US), and <code><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy()</a></code> is used when the date data is data is ordered day, month, then year (which is generally preferred outside the US). These functions are <strong>extremely robust and automagically recognize a wide range of formats</strong>, and of course they’re all vectorized! Here’s a few examples:</p>
<div class="sourceCode" id="cb359"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">mdy</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"7/4/25"</span>, <span class="st">"07-04-2025"</span>, <span class="st">"070425"</span>, <span class="st">"Jul 4 '25"</span>, <span class="st">"Friday, July 4th, 2025"</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "2025-07-04" "2025-07-04" "2025-07-04" "2025-07-04" "2025-07-04"</code></pre>
<div class="sourceCode" id="cb361"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"4/7/25"</span>, <span class="st">"04-07-2025"</span>, <span class="st">"040725"</span>, <span class="st">"4 Jul '25"</span>, <span class="st">"Friday, 4th of July, 2025"</span></span>
<span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "2025-07-04" "2025-07-04" "2025-07-04" "2025-07-04" "2025-07-04"</code></pre>
<p>As you can see, you just need to tell R which order to expect the date components and it will handle the rest! We only demonstrated the <code><a href="https://lubridate.tidyverse.org/reference/ymd.html">mdy()</a></code> and <code><a href="https://lubridate.tidyverse.org/reference/ymd.html">dmy()</a></code> functions here since they are by far the most common formats, but the other functions all behave the same.</p>
<p>One last parser. Sometimes data gives dates as a decimal, e.g. <code>2025-07-04</code> would be <code>2025.504</code> since it’s the 185th day of the year which means it’s <code>(185-1)/365*100%=50.4%</code> of the way into the year.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;The -1 in the numerator is due to the date being treated as 12am midnight, hence the 185th day, &lt;code&gt;2025-07-04&lt;/code&gt; is just about to start, so only 185 days have passed so far.&lt;/p&gt;"><sup>19</sup></a> R also has a dedicated function for this. <code><a href="https://lubridate.tidyverse.org/reference/date_decimal.html">date_decimal()</a></code> converts the decimal to a date+time object, which we can then round to the nearest date with <a href="https://lubridate.tidyverse.org/reference/round_date.html"><code class="sourceCode r"><span class="fu">round_date</span>(...,<span class="at">unit=</span><span class="st">"day"</span>)</code></a> and drop the time component with <code><a href="https://lubridate.tidyverse.org/reference/date.html">date()</a></code> which converts date+time objects to pure date objects (again, we are not covering date+time objects due to complexity &amp; limited time).</p>
<div class="sourceCode" id="cb363"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># generate a vector of elapsed 21st century dates</span></span>
<span><span class="co"># in decimal format for demo purposes</span></span>
<span><span class="co"># (here, runif uniformly samples 4 numbers from 2000 to 2025.504)</span></span>
<span><span class="va">dates2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">2000</span>, <span class="fl">2025.504</span><span class="op">)</span></span>
<span><span class="va">dates2</span></span></code></pre></div>
<pre><code>[1] 2006.772 2009.491 2014.610 2023.163</code></pre>
<div class="sourceCode" id="cb365"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># convert decimals to dates</span></span>
<span><span class="va">dates2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/date.html">date</a></span><span class="op">(</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/round_date.html">round_date</a></span><span class="op">(</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/date_decimal.html">date_decimal</a></span><span class="op">(</span><span class="va">dates2</span><span class="op">)</span>, unit <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dates2</span></span></code></pre></div>
<pre><code>[1] "2006-10-10" "2009-06-29" "2014-08-12" "2023-03-02"</code></pre>
<p>There is also a reverse function <code><a href="https://lubridate.tidyverse.org/reference/decimal_date.html">decimal_date()</a></code> that converts a date back into a decimal.</p>
<div class="sourceCode" id="cb367"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/decimal_date.html">decimal_date</a></span><span class="op">(</span><span class="va">dates2</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 2006.773 2009.490 2014.611 2023.164</code></pre>
</div>
<div id="aside-rs-calendar" class="section level3" number="3.11.2">
<h3>
<span class="header-section-number">3.11.2</span> Aside: R’s calendar<a class="anchor" aria-label="anchor" href="#aside-rs-calendar"><i class="fas fa-link"></i></a>
</h3>
<p>Quick aside. <strong>R has an <em>extremely</em> robust calendar</strong>, so you don’t need to worry about “babysitting” R. Notably, R knows exactly <a href="https://www.mathsisfun.com/leap-years.html">which years are leap and which aren’t</a>.</p>
<div class="sourceCode" id="cb369"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the most recent leap year is 2024, since it's divisible by 4</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">mdy</a></span><span class="op">(</span><span class="st">"Feb 29, 2024"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "2024-02-29"</code></pre>
<div class="sourceCode" id="cb371"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># however, years like 1900 or 2100 are not leap,</span></span>
<span><span class="co"># since they're also divisible by 100</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">mdy</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Feb 29, 1900"</span>, <span class="st">"Feb 29, 2100"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre class="warning"><code>Warning: 2 failed to parse.</code></pre>
<pre><code>[1] NA NA</code></pre>
<div class="sourceCode" id="cb374"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># but 2000 is leap, since it's also divisible by 400</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">mdy</a></span><span class="op">(</span><span class="st">"Feb 29, 2000"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "2000-02-29"</code></pre>
<div class="sourceCode" id="cb376"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># you can also use the leap_year() function instead</span></span>
<span><span class="co"># is the year that a given date is in leap?</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/leap_year.html">leap_year</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode" id="cb378"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># which of these given years are leap?</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/leap_year.html">leap_year</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1900</span>, <span class="fl">2000</span>, <span class="fl">2024</span>, <span class="fl">2100</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] FALSE  TRUE  TRUE FALSE</code></pre>
<p>Fun fact: R’s calendar is more rigorous than Excel’s calendar, since it correctly treats 1900 as non-leap, <a href="https://learn.microsoft.com/en-us/office/troubleshoot/excel/wrongly-assumes-1900-is-leap-year">unlike Excel</a>. This is of course probably immaterial in the 21<sup>st</sup> century, I just think it’s an amusing bit of trivia.</p>
</div>
<div id="getset-components" class="section level3" number="3.11.3">
<h3>
<span class="header-section-number">3.11.3</span> Get/set components<a class="anchor" aria-label="anchor" href="#getset-components"><i class="fas fa-link"></i></a>
</h3>
<p>Lubridate provides many get/set functions (often called getters and setters) for getting and setting different components (i.e. properties) associated with a date. Some common ones include <code><a href="https://lubridate.tidyverse.org/reference/year.html">year()</a></code>, <code><a href="https://lubridate.tidyverse.org/reference/month.html">month()</a></code>, <code><a href="https://lubridate.tidyverse.org/reference/day.html">day()</a></code>, <code><a href="https://lubridate.tidyverse.org/reference/day.html">wday()</a></code> (for day of the week), and <code><a href="https://lubridate.tidyverse.org/reference/quarter.html">quarter()</a></code>.</p>
<p>Let’s continue using the generated <code>dates2</code> object above, except I will add our example date earlier <code>2025-07-04</code> into the vector as the first element.</p>
<div class="sourceCode" id="cb380"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># add in Jul 4, then print (to remind us what it contains)</span></span>
<span><span class="va">dates2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">dates2</span><span class="op">)</span></span>
<span><span class="va">dates2</span></span></code></pre></div>
<pre><code>[1] "2025-07-04" "2006-10-10" "2009-06-29" "2014-08-12" "2023-03-02"</code></pre>
<div class="sourceCode" id="cb382"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># extract the year, month, day, wday, quarter</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html">year</a></span><span class="op">(</span><span class="va">dates2</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 2025 2006 2009 2014 2023</code></pre>
<div class="sourceCode" id="cb384"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/month.html">month</a></span><span class="op">(</span><span class="va">dates2</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1]  7 10  6  8  3</code></pre>
<div class="sourceCode" id="cb386"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/day.html">day</a></span><span class="op">(</span><span class="va">dates2</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1]  4 10 29 12  2</code></pre>
<div class="sourceCode" id="cb388"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># wday starts counting from Sunday, i.e. 1=Sunday, 2=Monday, etc.</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/day.html">wday</a></span><span class="op">(</span><span class="va">dates2</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 6 3 2 3 5</code></pre>
<div class="sourceCode" id="cb390"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/quarter.html">quarter</a></span><span class="op">(</span><span class="va">dates2</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 3 4 2 3 1</code></pre>
<p>Some functions (where it makes sense) like <code><a href="https://lubridate.tidyverse.org/reference/month.html">month()</a></code> and <code><a href="https://lubridate.tidyverse.org/reference/day.html">wday()</a></code> have additional arguments like <code>label</code> and <code>abbr</code> to control the output format when you have the option to output names instead of numbers. Again, I recommend you briefly check the help page of every new function you learn for additional options.</p>
<div class="sourceCode" id="cb392"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># output month as abbreviated names instead (abbr = TRUE by default)</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/month.html">month</a></span><span class="op">(</span><span class="va">dates2</span>, label <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] Jul Oct Jun Aug Mar
12 Levels: Jan &lt; Feb &lt; Mar &lt; Apr &lt; May &lt; Jun &lt; Jul &lt; Aug &lt; Sep &lt; Oct &lt; ... &lt; Dec</code></pre>
<div class="sourceCode" id="cb394"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># output day of week as full, unabbreviated names</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/day.html">wday</a></span><span class="op">(</span><span class="va">dates2</span>, label <span class="op">=</span> <span class="cn">TRUE</span>, abbr <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] Friday   Tuesday  Monday   Tuesday  Thursday
7 Levels: Sunday &lt; Monday &lt; Tuesday &lt; Wednesday &lt; Thursday &lt; ... &lt; Saturday</code></pre>
<div class="note">
<p>If your system is in a different language, you may see the code above output non-English names for the months and days of the week. This is because R uses your <a href="https://en.wikipedia.org/wiki/Locale_(computer_software)">system’s locale</a> to determine how to output some values. This is extremely easy to fix; simply run the line of code below ONCE in your console, then close and restart Rstudio for the changes to permanently take effect.</p>
<div class="sourceCode" id="cb396"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/write.html">write</a></span><span class="op">(</span><span class="st">'\ninvisible(Sys.setlocale("LC_TIME","C"))\n'</span>,<span class="st">"~/.Rprofile"</span>,<span class="fl">1</span>,<span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p>How does this work? It adds the line <code>invisible(Sys.setlocale("LC_TIME","C"))</code> to your <code>"~/.Rprofile"</code> file, which is run every time R starts up. The added line invisibly sets the <code>"LC_TIME"</code> locale variable to <code>"C"</code>, which tells lubridate to use English for all outputs.</p>
</div>
<p>The first line in each output above is the actual output names. The list of “levels” on each second line just shows the set of all possible values that could have been outputted. This return object is another example of an <a href="https://r4ds.hadley.nz/factors">“ordered factor”</a>. For our purposes this can mostly be treated as similar to a character/string vector. (If you want to do any string operations on the output, make sure to convert fully to character first with <code><a href="https://rdrr.io/r/base/character.html">as.character()</a></code>!)</p>
<p>These getters are extremely useful for both data cleaning as well as data visualization, since it can be much more pleasant to, for example, see a monthly breakdown as Jan, Feb, …, Dec instead of 1, 2, …, 12.</p>
<p>These same getters can also be used as “setters”, i.e. used to set the components. For example:</p>
<div class="sourceCode" id="cb397"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make a copy to use here, since this destroys the original vector</span></span>
<span><span class="va">new_dates2</span> <span class="op">&lt;-</span> <span class="va">dates2</span></span>
<span><span class="co"># change year of all dates to 2000</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html">year</a></span><span class="op">(</span><span class="va">new_dates2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">2000</span></span>
<span><span class="va">new_dates2</span></span></code></pre></div>
<pre><code>[1] "2000-07-04" "2000-10-10" "2000-06-29" "2000-08-12" "2000-03-02"</code></pre>
<div class="sourceCode" id="cb399"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># of course this is also vectorized!</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html">year</a></span><span class="op">(</span><span class="va">new_dates2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">2000</span><span class="op">:</span><span class="fl">2004</span></span>
<span><span class="va">new_dates2</span></span></code></pre></div>
<pre><code>[1] "2000-07-04" "2001-10-10" "2002-06-29" "2003-08-12" "2004-03-02"</code></pre>
<p>This works with all the getters above, feel free to experiment more with this on your own. There are also several other getter/setter functions such as <code><a href="https://lubridate.tidyverse.org/reference/day.html">qday()</a></code> for day of the quarter, <code><a href="https://lubridate.tidyverse.org/reference/week.html">week()</a></code> for week number, and <code><a href="https://lubridate.tidyverse.org/reference/quarter.html">semester()</a></code> for 1<sup>st</sup> or 2<sup>nd</sup> semester of the year.</p>
</div>
<div id="date-math" class="section level3" number="3.11.4">
<h3>
<span class="header-section-number">3.11.4</span> Date math<a class="anchor" aria-label="anchor" href="#date-math"><i class="fas fa-link"></i></a>
</h3>
<p>Since dates are represented internally as number of days since a reference point, doing math with dates turns out to be extremely easy. You can add/subtract days, make sequences, run logical comparisons, and even use some statistical summary functions.</p>
<div class="sourceCode" id="cb401"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get day after by adding +1 to our example date</span></span>
<span><span class="va">date</span> <span class="op">+</span> <span class="fl">1</span></span></code></pre></div>
<pre><code>[1] "2025-07-05"</code></pre>
<div class="sourceCode" id="cb403"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># what date was 1000 days ago?</span></span>
<span><span class="va">date</span> <span class="op">-</span> <span class="fl">1000</span></span></code></pre></div>
<pre><code>[1] "2022-10-08"</code></pre>
<div class="sourceCode" id="cb405"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># how many days has it been since y2k?</span></span>
<span><span class="co"># note that subtracting dates gives a "difftime" class object</span></span>
<span><span class="co"># you can convert this to a number using the familiar as.numeric()</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">date</span> <span class="op">-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">mdy</a></span><span class="op">(</span><span class="st">"1/1/00"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 9316</code></pre>
<div class="sourceCode" id="cb407"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make a sequence of dates from Jul 4 to the end of the month</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="va">date</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">mdy</a></span><span class="op">(</span><span class="st">"7/31/25"</span><span class="op">)</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code> [1] "2025-07-04" "2025-07-05" "2025-07-06" "2025-07-07" "2025-07-08" "2025-07-09"
 [7] "2025-07-10" "2025-07-11" "2025-07-12" "2025-07-13" "2025-07-14" "2025-07-15"
[13] "2025-07-16" "2025-07-17" "2025-07-18" "2025-07-19" "2025-07-20" "2025-07-21"
[19] "2025-07-22" "2025-07-23" "2025-07-24" "2025-07-25" "2025-07-26" "2025-07-27"
[25] "2025-07-28" "2025-07-29" "2025-07-30" "2025-07-31"</code></pre>
<div class="sourceCode" id="cb409"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># make a sequence of every Friday from Jul 4 to the end of the year</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="va">date</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html">mdy</a></span><span class="op">(</span><span class="st">"12/31/25"</span><span class="op">)</span>, by <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span></code></pre></div>
<pre><code> [1] "2025-07-04" "2025-07-11" "2025-07-18" "2025-07-25" "2025-08-01" "2025-08-08"
 [7] "2025-08-15" "2025-08-22" "2025-08-29" "2025-09-05" "2025-09-12" "2025-09-19"
[13] "2025-09-26" "2025-10-03" "2025-10-10" "2025-10-17" "2025-10-24" "2025-10-31"
[19] "2025-11-07" "2025-11-14" "2025-11-21" "2025-11-28" "2025-12-05" "2025-12-12"
[25] "2025-12-19" "2025-12-26"</code></pre>
<pre><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb412"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># what is the earliest date in the dates2 vector?</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">dates2</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "2006-10-10"</code></pre>
<div class="sourceCode" id="cb414"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># organize dates2 in chronological order</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">dates2</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "2006-10-10" "2009-06-29" "2014-08-12" "2023-03-02" "2025-07-04"</code></pre>
<div class="sourceCode" id="cb416"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># is today in dates2?</span></span>
<span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/now.html">today</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="va">dates2</span></span></code></pre></div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode" id="cb418"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># some statistical functions can also be run on dates</span></span>
<span><span class="co"># e.g. we can find the mean and median date of dates2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">dates2</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "2015-11-29"</code></pre>
<div class="sourceCode" id="cb420"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">dates2</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "2014-08-12"</code></pre>
<div class="sourceCode" id="cb422"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># we can even find the standard deviation of dates,</span></span>
<span><span class="co"># though this does NOT return a date itself but rather a number of days</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">dates2</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 3006.747</code></pre>
</div>
<div id="printing-dates" class="section level3" number="3.11.5">
<h3>
<span class="header-section-number">3.11.5</span> Printing dates<a class="anchor" aria-label="anchor" href="#printing-dates"><i class="fas fa-link"></i></a>
</h3>
<p>As a final note, let’s briefly discuss printing dates. You can use <code><a href="https://rdrr.io/r/base/format.html">format()</a></code> to print dates in a pretty way. Different ways of printing each component are represented using <code>%...</code> codes. Examples:</p>
<div class="sourceCode" id="cb424"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print today as mm/dd/yy which is common in the US</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="va">date</span>, <span class="st">"%m/%d/%y"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "07/04/25"</code></pre>
<div class="sourceCode" id="cb426"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># another way, slightly more "natural" feeling</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="va">date</span>, <span class="st">"%b %e, %Y"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "Jul  4, 2025"</code></pre>
<div class="sourceCode" id="cb428"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># fully written out, including weekday</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="va">date</span>, <span class="st">"%A, %B %e, %Y"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "Friday, July  4, 2025"</code></pre>
<div class="sourceCode" id="cb430"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># some shorthands also exist and may depend on your computer's locale</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="va">date</span>, <span class="st">"ISO prefers %F, but the US uses %D or %x"</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "ISO prefers 2025-07-04, but the US uses 07/04/25 or 7/4/2025"</code></pre>
<p>A full list of these percent codes can be found in the help page of <code><a href="https://rdrr.io/r/base/strptime.html">strptime()</a></code>, a base R function for parsing date/time objects.</p>

</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@xiee/utils/js/external-link.min.js" defer></script><script>
  $(function(){
    $(".note").addClass("alert alert-warning");
  });
  $(function(){
    $(".tip").addClass("alert alert-success");
  });
  $(function(){
    $(".def").addClass("alert alert-info");
  });
  $(function(){
    $(".eg").addClass("alert alert-secondary");
  });
  $(function(){
    $(".col-lg-3").addClass("col-lg-2").removeClass("col-lg-3");
  });
  $(function(){
    $(".col-lg-7").addClass("col-lg-8").removeClass("col-lg-7");
  });
</script><!-- https://stackoverflow.com/a/37839683/25278020 --><script>
  $(document).ready(function() {

  $chunks = $('.fold');

  $chunks.each(function () {

    // add button to source code chunks
    if ( $(this).hasClass('s') ) {
      $('pre.r', this).prepend("<div class=\"showopt\">Show Source</div><br style=\"line-height:22px;\"/>");
      $('pre.r', this).children('code').attr('class', 'folded');
    }

    // add button to output chunks
    if ( $(this).hasClass('o') ) {
      $('pre:not(.r)', this).has('code').prepend("<div class=\"showopt\">Show Output</div><br style=\"line-height:22px;\"/>");
      $('pre:not(.r)', this).children('code:not(r)').addClass('folded');

      // add button to plots
      $(this).find('img').wrap('<pre class=\"plot\"></pre>');
      $('pre.plot', this).prepend("<div class=\"showopt\">Show Plot</div><br style=\"line-height:22px;\"/>");
      $('pre.plot', this).children('img').addClass('folded');

    }
  });

  // hide all chunks when document is loaded
  $('.folded').css('display', 'none')

  // function to toggle the visibility
  $('.showopt').click(function() {
    var label = $(this).html();
    if (label.indexOf("Show") >= 0) {
      $(this).html(label.replace("Show", "Hide"));
    } else {
      $(this).html(label.replace("Hide", "Show"));
    }
    $(this).siblings('code, img').slideToggle('fast', 'swing');
  });
});

</script><!-- https://www.tutorialrepublic.com/faq/how-to-change-href-attribute-of-a-hyperlink-using-jquery.php--><script>
  $(document).ready(function(){
    $("a.anchorjs-link").each(function(){
      var oldUrl = $(this).attr("href"); // Get current url
      var newUrl = oldUrl.replace(/^#(\d+-)+/,"#"); // Create new url
      $(this).attr("href", "#" + $(this).closest("div").attr("id"));  // Set href value
      $(this).attr("title", location.protocol + "//" + location.host + location.pathname + $(this).attr("href")); // Set title value
    });
  });
</script><!-- https://stackoverflow.com/a/10415599/25278020 --><script>
  var observer = new MutationObserver(function(mutations) {
    mutations.forEach(function(mutation) {
        if (mutation.addedNodes && mutation.addedNodes.length > 0) {
            // element added to DOM
            var hasClass = [].some.call(mutation.addedNodes, function(el) {
                return el.classList.contains('bs-popover-top')
            });
            if (hasClass) {
              $("div.bs-popover-top a").each(function(){
                $(this).attr("target", "_blank");
              });
          }
        }
    });
});

var config = {
    attributes: true,
    childList: true,
    characterData: true
};

observer.observe(document.body, config);
</script><!--https://stackoverflow.com/a/49025957--><script>
  $(function() {
  $('a[class="footnote-ref"][data-toggle="popover"]').popover()
})

$('body')
  .on('mousedown', '.popover', function(e) {
    console.log("clicked inside popover")
    e.preventDefault()
  });
</script><div class="chapter-nav">
<div class="prev"><a href="rstudio-intro.html"><span class="header-section-number">2</span> Intro to R/Rstudio</a></div>
<div class="next"><a href="data-frames.html"><span class="header-section-number">4</span> Data Frames</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#data-vectors"><span class="header-section-number">3</span> Data Vectors</a></li>
<li><a class="nav-link" href="#types-of-vectors"><span class="header-section-number">3.1</span> Types of vectors</a></li>
<li><a class="nav-link" href="#numeric-vectors"><span class="header-section-number">3.2</span> Numeric vectors</a></li>
<li><a class="nav-link" href="#logical-vectors"><span class="header-section-number">3.3</span> Logical vectors</a></li>
<li><a class="nav-link" href="#other-constructors"><span class="header-section-number">3.4</span> Other constructors</a></li>
<li><a class="nav-link" href="#multiple-vectors-vector-recycling"><span class="header-section-number">3.5</span> Multiple vectors + vector recycling</a></li>
<li><a class="nav-link" href="#in-membership"><span class="header-section-number">3.6</span> %in% (Membership)</a></li>
<li><a class="nav-link" href="#vector-subsetting"><span class="header-section-number">3.7</span> Vector subsetting</a></li>
<li><a class="nav-link" href="#sortingreordering"><span class="header-section-number">3.8</span> Sorting/reordering</a></li>
<li>
<a class="nav-link" href="#character-vectors"><span class="header-section-number">3.9</span> Character vectors</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#basic-string-functions"><span class="header-section-number">3.9.1</span> Basic string functions</a></li>
<li><a class="nav-link" href="#pattern-string-functions"><span class="header-section-number">3.9.2</span> Pattern string functions</a></li>
<li><a class="nav-link" href="#additional-stringr-functions"><span class="header-section-number">3.9.3</span> Additional stringr functions</a></li>
<li><a class="nav-link" href="#comparing-strings"><span class="header-section-number">3.9.4</span> Comparing strings</a></li>
<li><a class="nav-link" href="#ordered-data"><span class="header-section-number">3.9.5</span> Bonus: ordered data</a></li>
</ul>
</li>
<li><a class="nav-link" href="#coercion"><span class="header-section-number">3.10</span> Coercion (converting types)</a></li>
<li>
<a class="nav-link" href="#date-vectors"><span class="header-section-number">3.11</span> Date vectors</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#parsing-dates"><span class="header-section-number">3.11.1</span> Parsing dates</a></li>
<li><a class="nav-link" href="#aside-rs-calendar"><span class="header-section-number">3.11.2</span> Aside: R’s calendar</a></li>
<li><a class="nav-link" href="#getset-components"><span class="header-section-number">3.11.3</span> Get/set components</a></li>
<li><a class="nav-link" href="#date-math"><span class="header-section-number">3.11.4</span> Date math</a></li>
<li><a class="nav-link" href="#printing-dates"><span class="header-section-number">3.11.5</span> Printing dates</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/bwu62/stat240-revamp/blob/master/03-data-vectors.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/bwu62/stat240-revamp/edit/master/03-data-vectors.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>STAT 240 Revamp</strong>" was written by Bi Cheng Wu, with help from Bret Larget and Cameron Jones. It was last built on 2025-10-15.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
